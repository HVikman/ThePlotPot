{"version":3,"file":"static/js/377.a5a9840a.chunk.js","mappings":"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","sources":["components/utilities/Error/Error.jsx","hooks/useLoadReCaptcha.js","pages/storypage/CommentCard.jsx","pages/storypage/AddComment.jsx","pages/storypage/Comments.jsx","pages/storypage/Chapter.jsx","hooks/useLikes.js","pages/storypage/Loading.jsx","pages/storypage/StoryPage.jsx","utils/executeRecaptcha.js"],"sourcesContent":["import React from 'react'\r\nimport { Container, Alert, Button } from 'react-bootstrap'\r\n\r\nconst ErrorComponent = ({ message, onRetry }) => {\r\n  return (\r\n    <Container className=\"mt-5\">\r\n      <Alert variant=\"danger\">\r\n        <Alert.Heading>Oh snap! An error occurred.</Alert.Heading>\r\n        <p>{message || 'Something went wrong. Please try again later.'}</p>\r\n        {onRetry && <Button variant=\"primary\" onClick={onRetry}>Retry</Button>}\r\n      </Alert>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default ErrorComponent","import { useEffect } from 'react'\r\n\r\nexport const useLoadReCaptcha = (siteKey) => {\r\n  useEffect(() => {\r\n    if (!window.grecaptcha) {\r\n      const script = document.createElement('script')\r\n      script.src = `https://www.google.com/recaptcha/api.js?render=${siteKey}`\r\n      script.async = true\r\n      script.defer = true\r\n      document.body.appendChild(script)\r\n    }\r\n  }, [siteKey])\r\n}\r\n","import React from 'react'\r\nimport { Card, Row, Col, Button } from 'react-bootstrap'\r\nimport { Popconfirm } from 'antd'\r\nimport { Link } from 'react-router-dom'\r\nimport { useMutation } from '@apollo/client'\r\nimport { DELETE_COMMENT } from '../../api/queries'\r\nimport { useNotifications } from '../../context/NotificationsContext'\r\nimport { useDarkMode } from '../../context/DarkModeContext'\r\n\r\nconst CommentCard = ({ comment, user, deleteComment }) => {\r\n  const { addNotification } = useNotifications()\r\n  const [delComment] = useMutation(DELETE_COMMENT)\r\n  const { isDarkMode } = useDarkMode()\r\n  const confirm = async () => {\r\n    try {\r\n      const { data } = await delComment({\r\n        variables: {\r\n          commentId: comment.id\r\n        }\r\n      })\r\n      console.log(data)\r\n      deleteComment(comment.id)\r\n      addNotification('Comment deleted successfully!', 3000, 'success')\r\n    } catch (error) {\r\n      console.error('There was an error deleting the comment:', error)\r\n      addNotification(error.message, 3000, 'error')\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <Card className={`shadow mt-3 ${isDarkMode ? 'dark-mode' : 'light-mode'}`}>\r\n      <Card.Body >\r\n        <Row>\r\n          <Col xs={3} md={1}>\r\n            <img\r\n              src={`https://www.gravatar.com/avatar/${comment.user.email}?s=400&d=robohash`}\r\n              className=\"img-fluid rounded-circle\"\r\n              alt=\"User Gravatar\"\r\n            />\r\n          </Col>\r\n          <Col xs={8} md={10}>\r\n            <Card.Title><Link style={{ color: 'inherit', textDecoration: 'inherit' }} to={`/user/${comment.user.id}`}>{comment.user.username}</Link></Card.Title>\r\n            <Card.Text>{comment.content}</Card.Text>\r\n          </Col>\r\n          <Col xs={1} md={1} className=\"d-flex align-items-start justify-content-end\">\r\n            {user && (\r\n              <>\r\n                {user.id === comment.user.id && (\r\n                  <Popconfirm\r\n                    title=\"Delete your comment?\"\r\n                    description=\"Are you sure you want to delete your comment?\"\r\n                    onConfirm={confirm}\r\n                    okText=\"Yes\"\r\n                    cancelText=\"No\"\r\n                  >\r\n                    <Button variant=\"danger\">Delete</Button>\r\n                  </Popconfirm>\r\n                )}\r\n\r\n                {user.has_superpowers && (\r\n                  <Popconfirm\r\n                    title=\"Admin Delete\"\r\n                    description=\"Are you sure you want to delete this user's comment as an admin?\"\r\n                    onConfirm={confirm}\r\n                    okText=\"Yes\"\r\n                    cancelText=\"No\"\r\n                  >\r\n                    <Button variant=\"warning\">Admin Delete</Button>\r\n                  </Popconfirm>\r\n                )}\r\n              </>\r\n            )}\r\n          </Col>\r\n        </Row>\r\n      </Card.Body>\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport default CommentCard\r\n","import { useFormik } from 'formik'\r\nimport * as Yup from 'yup'\r\nimport { Form, Button } from 'react-bootstrap'\r\nimport { useNotifications } from '../../context/NotificationsContext'\r\nimport { useMutation } from '@apollo/client'\r\nimport { ADD_COMMENT_MUTATION } from '../../api/queries'\r\nimport { useDarkMode } from '../../context/DarkModeContext'\r\nimport { useLoadReCaptcha } from '../../hooks/useLoadReCaptcha'\r\nimport { executeRecaptcha } from '../../utils/executeRecaptcha'\r\n\r\nconst validationSchema = Yup.object({\r\n  content: Yup.string()\r\n    .required('Required')\r\n    .min(10, 'Comment must be atleast 10 characters')\r\n    .max(1000, 'Must be 1000 characters or less')\r\n})\r\n\r\nconst initialValues = {\r\n  content: '',\r\n  honeypot: ''\r\n}\r\n\r\nconst AddCommentForm = ({ chapterId, addNewComment }) => {\r\n  useLoadReCaptcha('6LfY0fooAAAAAKaljIbo723ZiMGApMCVg6ZU805o')\r\n  const { addNotification } = useNotifications()\r\n\r\n  const [addComment] = useMutation(ADD_COMMENT_MUTATION)\r\n  const { isDarkMode } = useDarkMode()\r\n\r\n  const formik = useFormik({\r\n    initialValues,\r\n    validationSchema,\r\n    onSubmit: async (values) => {\r\n      console.log('Chapter ID:', chapterId)\r\n\r\n      if (values.honeypot) {\r\n        console.log('Bot detected')\r\n        return\r\n      }\r\n\r\n      let token\r\n      try {\r\n        token = await executeRecaptcha()\r\n      } catch (error) {\r\n        console.error('Error generating reCAPTCHA token:', error)\r\n        addNotification('Failed to verify reCAPTCHA. Please try again.', 3000, 'error')\r\n        return\r\n      }\r\n\r\n      try {\r\n        const { data } = await addComment({\r\n          variables: {\r\n            Input: {\r\n              content: values.content,\r\n              chapterId\r\n            },\r\n            token\r\n          }\r\n        })\r\n\r\n        addNewComment(data.addComment)\r\n        addNotification('Comment added successfully!', 3000, 'success')\r\n        formik.resetForm()\r\n\r\n      } catch (error) {\r\n        console.error('There was an error adding the comment:', error)\r\n        addNotification(error.message, 3000, 'error')\r\n      }\r\n    },\r\n  })\r\n\r\n  return (\r\n    <div className=\"add-comment-container mt-3\">\r\n      <h2>Add a Comment</h2>\r\n      <Form onSubmit={formik.handleSubmit}>\r\n\r\n        <Form.Group controlId=\"commentContent\" className={`my-2 custom-form ${isDarkMode ? 'dark-mode' : 'light-mode'}`}>\r\n          <Form.Control\r\n            as=\"textarea\"\r\n            className={`${isDarkMode ? 'dark-mode' : 'light-mode'}`}\r\n            name=\"content\"\r\n            placeholder=\"Your comment...\"\r\n            onChange={formik.handleChange}\r\n            onBlur={formik.handleBlur}\r\n            value={formik.values.content}\r\n            isInvalid={formik.touched.content && formik.errors.content}\r\n          />\r\n          <Form.Control.Feedback type=\"invalid\">\r\n            {formik.errors.content}\r\n          </Form.Control.Feedback>\r\n        </Form.Group>\r\n\r\n        <Form.Control style={{ display: 'none' }} name=\"honeypot\" onChange={formik.handleChange} value={formik.values.honeypot} />\r\n\r\n        <Button variant=\"secondary\" type=\"submit\">Submit</Button>\r\n      </Form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AddCommentForm\r\n","import { useState } from 'react'\r\nimport { Container } from 'react-bootstrap'\r\nimport CommentCard from './CommentCard'\r\nimport AddCommentForm from './AddComment'\r\nimport { useAuth } from '../../context/AuthContext'\r\n\r\nconst Comments = ({ comments: initialComments, chapterId }) => {\r\n  const { user } = useAuth()\r\n  const isAuthenticated = !!user\r\n  const [comments, setComments] = useState(initialComments)\r\n\r\n  const addNewComment = (newComment) => {\r\n    setComments(prevComments => [...prevComments, newComment])\r\n  }\r\n  const deleteComment = (commentId) => {\r\n    setComments(prevComments => prevComments.filter(comment => comment.id !== commentId))\r\n  }\r\n\r\n  return (\r\n\r\n    <Container fluid className='my-4 py-2'>\r\n      <h1>Comments</h1>\r\n      {}\r\n      {comments && comments.length > 0 ? comments.map(comment => (\r\n        <CommentCard key={comment.id} comment={comment} user={user} deleteComment={deleteComment} />\r\n      )): isAuthenticated ? <p>No comments yet, be first to comment!</p> : <p>No comments yet, <a href=\"/login\">login</a> or <a href=\"/signup\">signup</a> to comment!</p>}{isAuthenticated && <AddCommentForm chapterId={chapterId} addNewComment={addNewComment} />}\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Comments\r\n","import { useState, useEffect } from 'react'\r\nimport DOMPurify from 'dompurify'\r\nimport './Chapter.css'\r\nimport { Button } from 'react-bootstrap'\r\nimport { useAuth } from '../../context/AuthContext'\r\nimport { ArrowLeft, HandThumbsUpFill } from 'react-bootstrap-icons'\r\nimport { useLikeUnlikeChapter, useIsChapterLiked } from '../../hooks/useLikes.js'\r\nimport Comments from './Comments'\r\nimport { Popconfirm } from 'antd'\r\nimport { useMutation } from '@apollo/client'\r\nimport { DELETE_CHAPTER, DELETE_STORY } from '../../api/queries'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { useNotifications } from '../../context/NotificationsContext'\r\nimport { useDarkMode } from '../../context/DarkModeContext'\r\nimport '../../utils/theme.css'\r\n\r\nconst Chapter = ({ chapter, childChapters, onNavigate, onAddChapter, onGoBack, isLoading }) => {\r\n  const { addNotification } = useNotifications()\r\n  const navigate = useNavigate()\r\n  const [deleteChapter] = useMutation(DELETE_CHAPTER)\r\n  const [deleteStory] = useMutation(DELETE_STORY)\r\n  const [isLiked, setIsLiked] = useState(null)\r\n  const [isDisabled, setIsDisabled] = useState(false)\r\n  const { isDarkMode } = useDarkMode()\r\n  const [likes, setLikes] = useState(chapter.votes_count)\r\n\r\n  const initialIsLiked = useIsChapterLiked(chapter.id)\r\n  useEffect(() => {\r\n    setIsLiked(initialIsLiked)\r\n  }, [initialIsLiked])\r\n\r\n  const toggleLikeUnlike = useLikeUnlikeChapter()\r\n\r\n  const handleButton = async () => {\r\n    setIsDisabled(true)\r\n\r\n    if (!isLiked) {\r\n      const result = await toggleLikeUnlike(true, chapter.id)\r\n      setIsLiked(true)\r\n      setLikes(likes+1)\r\n      console.log('Like result:', result)}\r\n    else {const result = await toggleLikeUnlike(false, chapter.id)\r\n      setIsLiked(false)\r\n      setLikes(likes-1)\r\n      console.log('Unlike result:', result)}\r\n\r\n    setTimeout(() => {\r\n      setIsDisabled(false)\r\n    }, 1000)\r\n  }\r\n  const handleDelete = async () => {\r\n    console.log(chapter)\r\n    try {\r\n      if (chapter.branch === 0) {\r\n        const response = await deleteStory({\r\n          variables: { id: chapter.story.id }\r\n        })\r\n\r\n        if (response.data.deleteStory.success) {\r\n          addNotification(response.data.deleteStory.message, 3000, 'success')\r\n          navigate('/')\r\n          console.log('Story deleted successfully')\r\n        } else {\r\n          console.error(response.data.deleteStory.message)\r\n          addNotification(response.data.deleteStory.message, 3000, 'error')\r\n        }\r\n\r\n      } else {\r\n        const response = await deleteChapter({\r\n          variables: { id: chapter.id }\r\n        })\r\n\r\n        if (response.data.deleteChapter.success) {\r\n          addNotification(response.data.deleteChapter.message, 3000, 'success')\r\n          navigate('/')\r\n          console.log('Chapter deleted successfully')\r\n        } else {\r\n          console.error(response.data.deleteChapter.message)\r\n          addNotification(response.data.deleteChapter.message, 3000, 'error')\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error deleting:', error)\r\n    }\r\n  }\r\n\r\n\r\n\r\n  const { user } = useAuth()\r\n  const isAuthenticated = !!user\r\n  const sanitizedHTML = DOMPurify.sanitize(chapter.content)\r\n\r\n  return (\r\n    <div className=\"chapter\">\r\n\r\n      <Button variant='secondary' className=\"mb-3\" onClick={() => onGoBack()}>\r\n        < ArrowLeft />\r\n      </Button>\r\n      <div className={`chapter-content shadow my-2 ${isDarkMode ? 'dark-mode' : 'light-mode'}`} dangerouslySetInnerHTML={{ __html: sanitizedHTML }} />\r\n      <div className=\"chapter-stats m-2\">\r\n        {\r\n          isAuthenticated ? (\r\n            user.id === chapter.author.id ? ( childChapters.length === 0 ?\r\n              <>\r\n                <Popconfirm\r\n                  title={chapter.branch === 0 ?'Delete story' : 'Delete chapter'}\r\n                  description={chapter.branch === 0 ? 'Are you sure you want to delete this story': 'Are you sure you want to delete this chapter'}\r\n                  onConfirm={handleDelete}\r\n                  okText='Yes'\r\n                  cancelText='No'\r\n                >\r\n                  <Button variant='danger'>Delete</Button>\r\n                </Popconfirm><span>Likes:</span></>\r\n              : <span>Likes: </span>) : (\r\n              <Button\r\n                disabled={isDisabled}\r\n                variant={isLiked ? 'success' : 'secondary'}\r\n                className=\"mt-2\"\r\n                onClick={() => handleButton()}\r\n              >\r\n                <HandThumbsUpFill />\r\n              </Button>\r\n            )\r\n          ) : (\r\n            <span>Likes:</span>\r\n          )\r\n        }\r\n        {user ? user.has_superpowers && <Popconfirm\r\n          title={chapter.branch === 0 ?'Delete story' : 'Delete chapter'}\r\n          description={chapter.branch === 0 ? 'Are you sure you want to delete this story': 'Are you sure you want to delete this chapter'}\r\n          onConfirm={handleDelete}\r\n          okText='Yes'\r\n          cancelText='No'\r\n        >\r\n          <Button variant='danger'>Admin delete</Button>\r\n        </Popconfirm> : <></>}\r\n        <span>{likes}</span>\r\n      </div>\r\n      <div className=\"next-chapters m-2\">\r\n        {!isLoading && isAuthenticated && childChapters.length < 3 && chapter.branch < 9 && (\r\n          <Button variant='secondary' className=\"mr-3 mt-2\" onClick={() => onAddChapter()}>Add Chapter</Button>\r\n        )}\r\n        {childChapters.map(child => (\r\n          <Button variant='secondary' className=\"mr-3 mt-2\" key={child.id} onClick={() => onNavigate(child.id)}>\r\n            Continue to: {child.title}\r\n          </Button>\r\n        ))}\r\n\r\n      </div>\r\n      <Comments key={chapter.id} comments={chapter.comments} chapterId={chapter.id}/>\r\n\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Chapter\r\n","import { useQuery, useMutation } from '@apollo/client'\r\nimport { LIKE_CHAPTER, IS_CHAPTER_LIKED, UNLIKE_CHAPTER } from '../api/queries'\r\nimport { useNotifications } from '../context/NotificationsContext'\r\n\r\nexport const useIsChapterLiked = (id) => {\r\n  const { data } = useQuery(IS_CHAPTER_LIKED, {\r\n    variables: { id }\r\n  })\r\n\r\n  return data ? data.isChapterLiked : false\r\n}\r\n\r\n\r\nexport const useLikeUnlikeChapter = () => {\r\n  const { addNotification } = useNotifications()\r\n  const [likeChapterMutation] = useMutation(LIKE_CHAPTER)\r\n  const [unlikeChapterMutation] = useMutation(UNLIKE_CHAPTER)\r\n\r\n  const toggleLikeUnlike = async (like, id) => {\r\n    if (like) {\r\n      const { data } = await likeChapterMutation({ variables: { id } })\r\n      addNotification('Chapter liked', 1000, 'success')\r\n      return data.likeChapter\r\n    } else {\r\n      const { data } = await unlikeChapterMutation({ variables: { id } })\r\n      addNotification('Like removed', 1000, 'error')\r\n      return data.unlikeChapter\r\n    }\r\n  }\r\n\r\n  return toggleLikeUnlike\r\n}\r\n","import { Spin } from 'antd'\r\nimport { Card } from 'react-bootstrap'\r\nimport { useDarkMode } from '../../context/DarkModeContext'\r\nimport '../../utils/theme.css'\r\n\r\nconst loadingTexts = [\r\n  'Your epic saga is so vast, even our scrolls are taking a while. Hang tight!',\r\n  'Your tale\\'s intrigue has our library elves on their toes. One moment!',\r\n  'Such a legendary story requires some extra ink and quill. Bear with us...',\r\n  'Even the grand storytellers of old would be impressed! Prepping your narrative...',\r\n  'Your chapters are so gripping, our books needed a breather. Stay tuned...',\r\n  'Paging all scribes! Your monumental tale is on the way...',\r\n  'Even our magic mirrors need a second to capture the grandeur of your plot. Patience!',\r\n  'Your story has so many layers, even the onions are jealous. Peeling back the pages...',\r\n  'With tales as epic as yours, even the stars stop to listen. Setting the stage...',\r\n  'Weaving tales this intricate takes a touch of sorcery. Conjuring your story...'\r\n]\r\n\r\nconst getRandomLoadingText = () => {\r\n  return loadingTexts[Math.floor(Math.random() * loadingTexts.length)]\r\n}\r\n\r\nconst LoadingComponent = () => {\r\n  const { isDarkMode } = useDarkMode()\r\n  return (\r\n    <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '80vh' }}>\r\n      <Card style={{ width: '300px', textAlign: 'center' }} className={`shadow ${isDarkMode ? 'dark-mode' : 'light-mode'}`}>\r\n        <Card.Body >\r\n          <Spin size=\"large\" className='my-3' />\r\n          <Card.Title>Fetching the Story...</Card.Title>\r\n          <Card.Text>\r\n            {getRandomLoadingText()}\r\n          </Card.Text>\r\n        </Card.Body>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LoadingComponent","import { useState, useEffect } from 'react'\r\nimport { useQuery, useLazyQuery } from '@apollo/client'\r\nimport { useNavigate, useParams, useLocation, Link } from 'react-router-dom'\r\nimport Chapter from './Chapter'\r\nimport { Container, Row, Col, Card } from 'react-bootstrap'\r\nimport { GET_STORY_BY_ID, GET_CHAPTER_CHILDREN, GET_CHAPTER } from '../../api/queries'\r\nimport LoadingComponent from './Loading'\r\nimport ErrorComponent from '../../components/utilities/Error'\r\nimport { useDarkMode } from '../../context/DarkModeContext'\r\n\r\nconst StoryPage = () => {\r\n  const { isDarkMode } = useDarkMode()\r\n  const navigate = useNavigate()\r\n  const { storyId, chapterId } = useParams()\r\n\r\n  //GraphQL queries\r\n  const { data, loading, error } = useQuery(GET_STORY_BY_ID, {\r\n    variables: { id: storyId, chapterId },\r\n  })\r\n  const [getChildChapters, { data: childChaptersData, loading: childChaptersLoading }] = useLazyQuery(GET_CHAPTER_CHILDREN)\r\n  const [getParentChapter, { data: parentChapterData }] = useLazyQuery(GET_CHAPTER)\r\n\r\n  const location = useLocation()\r\n  const { chapter, navigationStack: newNavigationStack } = location.state || {}\r\n\r\n  const [currentChapter, setCurrentChapter] = useState(null)\r\n  const [navigationStack, setNavigationStack] = useState([])\r\n\r\n  useEffect(() => {\r\n    if (chapter) {\r\n      setCurrentChapter(chapter)\r\n      window.history.replaceState(null, '', `/story/${storyId}/chapter/${chapter.id}`)\r\n      if (newNavigationStack) {\r\n        setNavigationStack(newNavigationStack)\r\n      }\r\n    } else if (data && data.getStory && data.getStory.chapters) {\r\n      setCurrentChapter(data.getStory.chapters[0])\r\n    }\r\n  }, [chapter, data, newNavigationStack, storyId])\r\n  useEffect(() => {\r\n    if (currentChapter) {\r\n      getChildChapters({ variables: { id: currentChapter.id } })\r\n    }\r\n  }, [currentChapter, getChildChapters])\r\n  useEffect(() => {\r\n    if (parentChapterData && parentChapterData.getChapter) {\r\n      setCurrentChapter(parentChapterData.getChapter)\r\n      window.history.replaceState(null, '', `/story/${storyId}/chapter/${parentChapterData.getChapter.id}`)\r\n    }\r\n  }, [parentChapterData, storyId])\r\n\r\n  if (loading) return <LoadingComponent />\r\n  if (error) return <ErrorComponent message={error.message} />\r\n\r\n  const navigateToChapter = (chapterId) => {\r\n    let chaptersArray\r\n\r\n    if (childChaptersData && childChaptersData.getChapterChildren) {\r\n      chaptersArray = childChaptersData.getChapterChildren\r\n    } else if (data && data.getStory && Array.isArray(data.getStory.chapters)) {\r\n      chaptersArray = data.getStory.chapters\r\n    }\r\n    window.scrollTo({ top: 0, behavior: 'smooth' })\r\n    setNavigationStack([...navigationStack, currentChapter])\r\n    const selectedChapter = chaptersArray.find(chapter => chapter.id === chapterId)\r\n    if (!selectedChapter) {\r\n      console.log('Chapter not found with the given ID:', chapterId)\r\n      return\r\n    }\r\n    setCurrentChapter(selectedChapter)\r\n    window.history.replaceState(null, '', `/story/${storyId}/chapter/${selectedChapter.id}`)\r\n    getChildChapters({ variables: { id: selectedChapter.id } })\r\n  }\r\n\r\n  const goBack = () => {\r\n    const lastChapter = navigationStack.pop()\r\n    window.scrollTo({ top: 0, behavior: 'smooth' })\r\n    console.log(currentChapter)\r\n    setNavigationStack([...navigationStack])\r\n    if (lastChapter) {\r\n      setCurrentChapter(lastChapter)\r\n      window.history.replaceState(null, '', `/story/${storyId}/chapter/${lastChapter.id}`)\r\n    } else if (currentChapter && currentChapter.parentChapterId) {\r\n      getParentChapter({ variables: { getChapterId: currentChapter.parentChapterId } })\r\n    } else {\r\n      navigate('/')\r\n    }\r\n  }\r\n\r\n  const handleAddChapter = ( ) => {\r\n    navigate('/add-chapter', {\r\n      state: {\r\n        storyId: storyId,\r\n        parentChapter: currentChapter,\r\n        navigationStack: navigationStack\r\n      }\r\n    })\r\n  }\r\n\r\n  return (\r\n    <Container className=\"mt-5\">\r\n      <Row>\r\n        <Col md={9}>\r\n          {currentChapter && (\r\n            <Chapter\r\n              chapter={currentChapter}\r\n              childChapters={childChaptersData ? childChaptersData.getChapterChildren : []}\r\n              onNavigate={navigateToChapter}\r\n              onAddChapter={handleAddChapter}\r\n              onGoBack={goBack}\r\n              isLoading={childChaptersLoading}\r\n            />\r\n          )}\r\n        </Col>\r\n        <Col md={3}>\r\n          {currentChapter &&\r\n            <Card className={`shadow mt-3 ${isDarkMode ? 'dark-mode' : 'light-mode'}`}>\r\n              <Card.Body>\r\n                <Card.Title>{data.getStory.title}</Card.Title>\r\n                <Card.Subtitle className=\"mb-2 text-muted\">{data.getStory.genre}</Card.Subtitle>\r\n                {currentChapter.title && <Card.Text>Chapter {currentChapter.branch+1}:<br /> { currentChapter.title }</Card.Text> }\r\n                <Card.Text><span>Reads: {currentChapter && currentChapter.reads_count}</span></Card.Text>\r\n                <Card.Text><small className=\"text-muted\">Written by: {currentChapter ?\r\n                  <Link to={`/user/${currentChapter.author.id}`}>{currentChapter.author.username}</Link> :\r\n                  <Link to={`/user/${data.getStory.author.id}`}>{data.getStory.author.username}</Link> }\r\n                </small>\r\n                </Card.Text>\r\n                {currentChapter.branch === 0 ?<Card.Text>{data.getStory.description}</Card.Text>:null}\r\n                {currentChapter.author.coffee && <Card.Text>Enjoying what {currentChapter.author.username} is writing? <a href={currentChapter.author.coffee} target=\"_blank\" rel=\"noreferrer\"> Buy them a coffee </a>  </Card.Text>}\r\n\r\n              </Card.Body>\r\n            </Card>}\r\n\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default StoryPage\r\n","const siteKey = '6LfY0fooAAAAAKaljIbo723ZiMGApMCVg6ZU805o'\r\n\r\nexport const executeRecaptcha = (action = 'submit') => {\r\n  return new Promise((resolve, reject) => {\r\n    if (!window.grecaptcha) {\r\n      return reject(new Error('reCAPTCHA not loaded yet'))\r\n    }\r\n\r\n    window.grecaptcha.ready(() => {\r\n      window.grecaptcha.execute(siteKey, { action })\r\n        .then(token => resolve(token))\r\n        .catch(err => reject(err))\r\n    })\r\n  })\r\n}\r\n"],"names":["_ref","message","onRetry","_jsx","Container","className","children","_jsxs","Alert","variant","Heading","Button","onClick","useLoadReCaptcha","siteKey","useEffect","window","grecaptcha","script","document","createElement","src","concat","async","defer","body","appendChild","comment","user","deleteComment","addNotification","useNotifications","delComment","useMutation","DELETE_COMMENT","isDarkMode","useDarkMode","confirm","data","variables","commentId","id","console","log","error","Card","Body","Row","Col","xs","md","email","alt","Title","Link","style","color","textDecoration","to","username","Text","content","_Fragment","Popconfirm","title","description","onConfirm","okText","cancelText","has_superpowers","validationSchema","Yup","required","min","max","initialValues","honeypot","chapterId","addNewComment","addComment","ADD_COMMENT_MUTATION","formik","useFormik","onSubmit","values","token","executeRecaptcha","Input","resetForm","Form","handleSubmit","Group","controlId","Control","as","name","placeholder","onChange","handleChange","onBlur","handleBlur","value","isInvalid","touched","errors","Feedback","type","display","comments","initialComments","useAuth","isAuthenticated","setComments","useState","prevComments","filter","fluid","length","map","CommentCard","href","AddCommentForm","newComment","chapter","childChapters","onNavigate","onAddChapter","onGoBack","isLoading","navigate","useNavigate","deleteChapter","DELETE_CHAPTER","deleteStory","DELETE_STORY","isLiked","setIsLiked","isDisabled","setIsDisabled","likes","setLikes","votes_count","initialIsLiked","useQuery","IS_CHAPTER_LIKED","isChapterLiked","useIsChapterLiked","toggleLikeUnlike","useLikeUnlikeChapter","likeChapterMutation","LIKE_CHAPTER","unlikeChapterMutation","UNLIKE_CHAPTER","like","likeChapter","unlikeChapter","handleDelete","branch","response","story","success","sanitizedHTML","DOMPurify","sanitize","ArrowLeft","dangerouslySetInnerHTML","__html","author","disabled","result","setTimeout","handleButton","HandThumbsUpFill","child","Comments","loadingTexts","LoadingComponent","justifyContent","alignItems","height","width","textAlign","Spin","size","Math","floor","random","StoryPage","storyId","useParams","loading","GET_STORY_BY_ID","getChildChapters","childChaptersData","childChaptersLoading","useLazyQuery","GET_CHAPTER_CHILDREN","getParentChapter","parentChapterData","GET_CHAPTER","location","useLocation","navigationStack","newNavigationStack","state","currentChapter","setCurrentChapter","setNavigationStack","history","replaceState","getStory","chapters","getChapter","ErrorComponent","Chapter","getChapterChildren","chaptersArray","Array","isArray","scrollTo","top","behavior","selectedChapter","find","handleAddChapter","parentChapter","goBack","lastChapter","pop","parentChapterId","getChapterId","Subtitle","genre","reads_count","coffee","target","rel","action","arguments","undefined","Promise","resolve","reject","Error","ready","execute","then","catch","err"],"sourceRoot":""}