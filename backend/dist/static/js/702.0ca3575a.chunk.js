"use strict";(self.webpackChunktheplotpot_frontend=self.webpackChunktheplotpot_frontend||[]).push([[702],{8702:(e,t,r)=>{r.r(t),r.d(t,{default:()=>S});var o=r(3516),n=r(899),a=r(6216),i=r(457),s=r(6311),l=r(2900),c=r(4282);const d=["Action and Adventure","Adventure","Alternate History","Anthology","Art","Autobiography","Biography","Childrens","Classic","Comic/Graphic Novel","Contemporary","Crime","Drama","Dystopian","Epic","Erotic Fiction","Fable","Fairy Tale","Fantasy","Gothic Fiction","Historical Fiction","Horror","Humor","Inspirational","Journal","LGBT","Literary Fiction","Military/War Fiction","Mystery","Mythology","Noir","Paranormal Romance","Philosophical","Poetry","Political","Post-Apocalyptic","Psychological Thriller","Religious","Romance","Satire","Science Fiction","Self-help","Short Story","Speculative Fiction","Spiritual","Sports","Suspense/Thriller","Travel","True Crime","Western","Young Adult (YA)"];var h=r(2823),u=r.n(h),p=(r(7590),r(1393),r(583),r(4838),r(2855)),y=r(1898),g=r(1881),m=r(4743),x=r(3216);var A=r(6133),j=r(579);const v={characterCounter:{container:"#character-count",maxChars:12e3},toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","blockquote"],[{list:"ordered"},{list:"bullet"}]]},C=n.Ik({title:n.Yj().required("Required").max(100,"Must be 100 characters or less"),description:n.Yj().required("Required").max(500,"Must be 450 characters or less"),content:n.Yj().required("Required"),genre:n.Yj().required("Required")}),b={title:"",description:"",content:"",genre:"",honeypot:""},S=()=>{const{addNotification:e}=(0,y.E)(),{user:t}=(0,p.A)(),r=!!t,{isDarkMode:n}=(0,A.D2)(),h=(e=>{const t=(0,x.Zp)(),[r]=(0,g.n)(m.dj,{update:(r,o)=>{let{data:{createStory:n}}=o;n.success?(e("".concat(n.story.title," created successfully!"),2e3,"success"),console.log("New Story ID:",n.story.id),t("/story/".concat(n.story.id))):(console.log("Failed to create story:",n.message),e("Story creation failed: ".concat(n.message),2e3,"error"));const{getAllStories:a}=r.readQuery({query:m.F4}),i=[...a,n.story];r.writeQuery({query:m.F4,data:{getAllStories:i}})}});return r})(e),S=(0,o.Wx)({initialValues:b,validationSchema:C,onSubmit:t=>{t.honeypot?console.log("Bot detected"):grecaptcha.ready((async()=>{const r=await grecaptcha.execute("6LfY0fooAAAAAKaljIbo723ZiMGApMCVg6ZU805o",{action:"submit"});h({variables:{title:t.title,description:t.description,genre:t.genre,firstChapterContent:t.content,token:r}}).catch((t=>{console.error("There was an error creating the chapter:",t),e(t.message,3e3,"error")}))}))}});return r?(0,j.jsxs)(a.A,{onSubmit:S.handleSubmit,children:[(0,j.jsxs)(i.A,{defaultActiveKey:"0",children:[(0,j.jsxs)(i.A.Item,{eventKey:"0",className:"".concat(n?"dark-mode":"light-mode"),children:[(0,j.jsx)(i.A.Header,{children:"Step 1: Basic Details"}),(0,j.jsxs)(i.A.Body,{children:[(0,j.jsxs)(a.A.Group,{controlId:"formTitle",children:[(0,j.jsx)(a.A.Label,{children:"Title"}),(0,j.jsx)(s.A,{type:"text",placeholder:"Give your story a cool title",name:"title",onChange:S.handleChange,onBlur:S.handleBlur,value:S.values.title})]}),(0,j.jsxs)(a.A.Group,{controlId:"formDescription",children:[(0,j.jsx)(a.A.Label,{children:"Description"}),(0,j.jsx)(s.A,{as:"textarea",rows:4,placeholder:"Captivating description goes here!",name:"description",onChange:S.handleChange,onBlur:S.handleBlur,value:S.values.description})]}),(0,j.jsxs)(a.A.Group,{controlId:"formGenre",children:[(0,j.jsx)(a.A.Label,{children:"Genre"}),(0,j.jsxs)(l.A,{name:"genre",onChange:S.handleChange,onBlur:S.handleBlur,value:S.values.genre,className:"".concat(n?"dark-mode":"light-mode"),children:[(0,j.jsx)("option",{value:"",label:"Select genre"}),d.map((e=>(0,j.jsx)("option",{value:e,children:e},e)))]})]}),(0,j.jsx)(s.A,{type:"text",name:"honeypot",onChange:S.handleChange,value:S.values.honeypot,style:{display:"none"}})]})]}),(0,j.jsxs)(i.A.Item,{eventKey:"1",className:"".concat(n?"dark-mode":"light-mode"),children:[(0,j.jsx)(i.A.Header,{children:"Step 2: Story Content"}),(0,j.jsxs)(i.A.Body,{children:[(0,j.jsx)(u(),{value:S.values.content,onChange:e=>S.setFieldValue("content",e),onBlur:()=>S.setFieldTouched("content",!0),theme:"snow",modules:v}),(0,j.jsx)("div",{id:"character-count"})]})]})]}),(0,j.jsx)(c.A,{variant:"secondary",type:"submit",children:"Submit"})]}):(0,j.jsx)("p",{children:"You are not logged in."})}},1393:(e,t,r)=>{var o=r(4175),n=r.n(o);class a{constructor(e,t){this.quill=e,this.options=t,this.container=document.querySelector(t.container),e.on("text-change",this.update.bind(this)),this.update()}calculate(){return this.quill.getText().length-1}update(){let e=this.calculate();if(e>this.options.maxChars){let e=this.quill.getText().substring(0,this.options.maxChars);this.quill.setText(e)}this.container.innerText=e+" / "+this.options.maxChars}}n().register("modules/characterCounter",a)},583:()=>{},4838:()=>{}}]);
//# sourceMappingURL=702.0ca3575a.chunk.js.map