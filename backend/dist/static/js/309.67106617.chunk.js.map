{"version":3,"file":"static/js/309.67106617.chunk.js","mappings":"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","sources":["pages/newstory/genres.js","pages/newstory/StoryForm.jsx","hooks/createStory.js","utils/charactercounter.js"],"sourcesContent":["export const genres = [\r\n  'Action and Adventure',\r\n  'Adventure',\r\n  'Alternate History',\r\n  'Anthology',\r\n  'Art',\r\n  'Autobiography',\r\n  'Biography',\r\n  'Childrens',\r\n  'Classic',\r\n  'Comic/Graphic Novel',\r\n  'Contemporary',\r\n  'Crime',\r\n  'Drama',\r\n  'Dystopian',\r\n  'Epic',\r\n  'Erotic Fiction',\r\n  'Fable',\r\n  'Fairy Tale',\r\n  'Fantasy',\r\n  'Gothic Fiction',\r\n  'Historical Fiction',\r\n  'Horror',\r\n  'Humor',\r\n  'Inspirational',\r\n  'Journal',\r\n  'LGBT',\r\n  'Literary Fiction',\r\n  'Military/War Fiction',\r\n  'Mystery',\r\n  'Mythology',\r\n  'Noir',\r\n  'Paranormal Romance',\r\n  'Philosophical',\r\n  'Poetry',\r\n  'Political',\r\n  'Post-Apocalyptic',\r\n  'Psychological Thriller',\r\n  'Religious',\r\n  'Romance',\r\n  'Satire',\r\n  'Science Fiction',\r\n  'Self-help',\r\n  'Short Story',\r\n  'Speculative Fiction',\r\n  'Spiritual',\r\n  'Sports',\r\n  'Suspense/Thriller',\r\n  'Travel',\r\n  'True Crime',\r\n  'Western',\r\n  'Young Adult (YA)'\r\n]\r\nexport default genres\r\n","import React, { useState, useEffect } from 'react'\r\nimport { useFormik } from 'formik'\r\nimport * as Yup from 'yup'\r\nimport { AutoComplete, Collapse, Input, Form } from 'antd'\r\nimport { Button } from 'react-bootstrap'\r\nimport genres from './genres'\r\nimport ReactQuill from 'react-quill'\r\nimport 'quill/dist/quill.snow.css'\r\nimport '../../utils/charactercounter'\r\nimport './quill.css'\r\n\r\nimport { useAuth } from '../auth/AuthContext'\r\nimport { useNotifications } from '../../components/NotificationsContext'\r\nimport { useCreateStory } from '../../hooks/createStory'\r\n\r\n// Form validation schema\r\nconst validationSchema = Yup.object({\r\n  title: Yup.string()\r\n    .required('Required')\r\n    .max(100, 'Must be 100 characters or less'),\r\n  description: Yup.string()\r\n    .required('Required')\r\n    .max(500, 'Must be 450 characters or less'),\r\n  content: Yup.string().required('Required'),\r\n  genre: Yup.string().required('Required')\r\n})\r\n\r\nconst initialValues = {\r\n  title: '',\r\n  description: '',\r\n  content: '',\r\n  genre: '',\r\n  honeypot: '',\r\n}\r\n\r\n// Quill modules\r\nconst quillModules = {\r\n  characterCounter: {\r\n    container: '#character-count',\r\n    maxChars: 12000\r\n  },\r\n  toolbar: [\r\n    [{ 'header': [1, 2, 3, false] }],\r\n    ['bold', 'italic', 'underline', 'blockquote'],\r\n    [{ 'list': 'ordered' }, { 'list': 'bullet' }],\r\n  ]\r\n}\r\n\r\nconst StoryForm = () => {\r\n  const { addNotification } = useNotifications()\r\n  const { user } = useAuth()\r\n  const isAuthenticated = !!user\r\n\r\n  const [disabledPanels, setDisabledPanels] = useState('disabled')\r\n\r\n  const createStory = useCreateStory(addNotification)\r\n\r\n  const formik = useFormik({\r\n    initialValues,\r\n    validationSchema,\r\n    onSubmit: (values) => {\r\n      if (values.honeypot) {\r\n        console.log('Bot detected')\r\n        return\r\n      }\r\n      // eslint-disable-next-line no-undef\r\n      grecaptcha.ready(async () => {\r\n        // eslint-disable-next-line no-undef\r\n        const token = await grecaptcha.execute('6LfY0fooAAAAAKaljIbo723ZiMGApMCVg6ZU805o', { action: 'submit' })\r\n\r\n        createStory({\r\n          variables: {\r\n            title: values.title,\r\n            description: values.description,\r\n            genre: values.genre,\r\n            firstChapterContent: values.content,\r\n            token\r\n          }\r\n        }).catch(error => {\r\n          console.error('There was an error creating the chapter:', error)\r\n          addNotification(error.message, 3000, 'error')\r\n        })})\r\n    },\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (formik.values.title && formik.values.description && formik.values.genre) {\r\n      setDisabledPanels('')\r\n    } else {\r\n      setDisabledPanels('disabled')\r\n    }\r\n  }, [formik.values.title, formik.values.description, formik.values.genre])\r\n\r\n  if (!isAuthenticated) {\r\n    return <p>You are not logged in.</p>\r\n  }\r\n\r\n  const items = [\r\n    {\r\n      key: '1',\r\n      label: 'Step 1: Basic Details',\r\n      children: (\r\n        <Form layout=\"vertical\" onSubmit={formik.handleSubmit} className='mx-2'>\r\n          <Form.Item label=\"Title\" help={formik.touched.title && formik.errors.title}>\r\n            <Input\r\n              type=\"text\"\r\n              name=\"title\"\r\n              placeholder=\"Give your story a cool title\"\r\n              onChange={formik.handleChange}\r\n              onBlur={formik.handleBlur}\r\n              value={formik.values.title}\r\n            />\r\n          </Form.Item>\r\n          <Form.Item label=\"Description\" help={formik.touched.description && formik.errors.description}>\r\n            <Input.TextArea\r\n              name=\"description\"\r\n              placeholder='Captivating description goes here!'\r\n              onChange={formik.handleChange}\r\n              onBlur={formik.handleBlur}\r\n              value={formik.values.description}\r\n              rows={4}\r\n            />\r\n          </Form.Item>\r\n          <Form.Item style={{ display: 'none' }}>\r\n            <Input\r\n              type=\"text\"\r\n              name=\"honeypot\"\r\n              onChange={formik.handleChange}\r\n              onBlur={formik.handleBlur}\r\n              value={formik.values.honeypot}\r\n            />\r\n          </Form.Item>\r\n          <Form.Item label=\"Genre\" help={formik.touched.genre && formik.errors.genre}>\r\n            <AutoComplete\r\n              value={formik.values.genre}\r\n              onChange={value => formik.setFieldValue('genre', value)}\r\n              style={{ width: '100%' }}\r\n              options={genres.map(genre => ({ value: genre }))}\r\n              placeholder=\"Select a genre\"\r\n              filterOption={(inputValue, option) =>\r\n                option.value.toUpperCase().includes(inputValue.toUpperCase())\r\n              }\r\n            />\r\n          </Form.Item>\r\n        </Form>\r\n      )\r\n    },\r\n    {\r\n      key: '2',\r\n      collapsible: disabledPanels,\r\n      label: 'Step 2: Story Content',\r\n      children: (\r\n        <div className='mx-2'>\r\n          <ReactQuill\r\n            value={formik.values.content}\r\n            onChange={value => formik.setFieldValue('content', value)}\r\n            theme=\"snow\"\r\n            modules={quillModules}\r\n          />\r\n          <div id=\"character-count\"></div>\r\n          <Button variant='secondary' onClick={() => formik.handleSubmit()}>Submit</Button>\r\n        </div>\r\n      )\r\n    }\r\n  ]\r\n\r\n  return (\r\n    <Collapse items={items} defaultActiveKey={['1']} />\r\n  )\r\n}\r\n\r\nexport default StoryForm\r\n","import { useMutation } from '@apollo/client'\r\nimport { GET_ALL_STORIES, CREATE_STORY } from '../api/queries'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nexport const useCreateStory = (addNotification) => {\r\n  const navigate = useNavigate()\r\n\r\n  const [createStory] = useMutation(CREATE_STORY, {\r\n    update: (cache, { data: { createStory } }) => {\r\n      if (createStory.success) {\r\n        addNotification(`${createStory.story.title} created successfully!`, 2000, 'success')\r\n        console.log('New Story ID:', createStory.story.id)\r\n        navigate(`/story/${createStory.story.id}`)\r\n      } else {\r\n        console.log('Failed to create story:', createStory.message)\r\n        addNotification(`Story creation failed: ${createStory.message}`, 2000, 'error')\r\n      }\r\n      const { getAllStories } = cache.readQuery({ query: GET_ALL_STORIES })\r\n      const updatedStories = [...getAllStories, createStory.story]\r\n      cache.writeQuery({\r\n        query: GET_ALL_STORIES,\r\n        data: { getAllStories: updatedStories }\r\n      })\r\n    }\r\n  })\r\n\r\n  return createStory\r\n}\r\n","import Quill from 'quill'\r\n\r\nclass CharacterCounter {\r\n  constructor(quill, options) {\r\n    this.quill = quill\r\n    this.options = options\r\n    this.container = document.querySelector(options.container)\r\n\r\n    quill.on('text-change', this.update.bind(this))\r\n    this.update()\r\n  }\r\n\r\n  calculate() {\r\n    let text = this.quill.getText()\r\n    return text.length\r\n  }\r\n\r\n  update() {\r\n    let charCount = this.calculate()\r\n    if (charCount > this.options.maxChars) {\r\n      let currentText = this.quill.getText()\r\n      let newText = currentText.substring(0, this.options.maxChars)\r\n      this.quill.setText(newText)\r\n    }\r\n    this.container.innerText = charCount + ' / ' + this.options.maxChars\r\n  }\r\n}\r\n\r\nQuill.register('modules/characterCounter', CharacterCounter)\r\n\r\nexport default CharacterCounter\r\n"],"names":["validationSchema","Yup","title","required","max","description","content","genre","initialValues","honeypot","quillModules","characterCounter","container","maxChars","toolbar","StoryForm","addNotification","useNotifications","user","useAuth","isAuthenticated","disabledPanels","setDisabledPanels","useState","createStory","navigate","useNavigate","useMutation","CREATE_STORY","update","cache","_ref","data","success","concat","story","console","log","id","message","getAllStories","readQuery","query","GET_ALL_STORIES","updatedStories","writeQuery","useCreateStory","formik","useFormik","onSubmit","values","grecaptcha","ready","async","token","execute","action","variables","firstChapterContent","catch","error","useEffect","_jsx","children","items","key","label","_jsxs","Form","layout","handleSubmit","className","Item","help","touched","errors","Input","type","name","placeholder","onChange","handleChange","onBlur","handleBlur","value","TextArea","rows","style","display","AutoComplete","setFieldValue","width","options","genres","map","filterOption","inputValue","option","toUpperCase","includes","collapsible","ReactQuill","theme","modules","Button","variant","onClick","Collapse","defaultActiveKey","CharacterCounter","constructor","quill","this","document","querySelector","on","bind","calculate","getText","length","charCount","newText","substring","setText","innerText","Quill"],"sourceRoot":""}