"use strict";(self.webpackChunktheplotpot_frontend=self.webpackChunktheplotpot_frontend||[]).push([[759],{8547:(e,t,r)=>{r.d(t,{A:()=>f});r(5043);var n=r(4990),o=r(6269),a=r(661),c=r(6896),i=r(9351),s=r(6727),l=r(3442),d=r(5830),u=r(7039),h=r(928),y=r(8389),x=r(6210),A=r(8576),v=r(4313),g=r(1683),p=r(4857),m=r(3461),j=r(579);const f=e=>{let{content:t,onUpdate:r,characterLimit:f=12e3}=e;const C=(0,n.hG)({extensions:[o.A,a.A.configure({levels:[1,2,3]}),c.Ay,i.Ay,s.A,l.Ay,d.Ay,u.Ay,h.A.configure({limit:f})],content:t,onUpdate:e=>{let{editor:t}=e;r&&r(t.getHTML())}});return C?(0,j.jsxs)("div",{className:"rich-text-editor",children:[(0,j.jsxs)("div",{className:"editor-toolbar",children:[(0,j.jsx)("button",{onClick:()=>C.chain().focus().toggleBold().run(),className:C.isActive("bold")?"active":"",children:(0,j.jsx)(y.A,{})}),(0,j.jsx)("button",{onClick:()=>C.chain().focus().toggleItalic().run(),className:C.isActive("italic")?"active":"",children:(0,j.jsx)(x.A,{})}),(0,j.jsx)("button",{onClick:()=>C.chain().focus().toggleUnderline().run(),className:C.isActive("underline")?"active":"",children:(0,j.jsx)(A.A,{})}),(0,j.jsxs)("button",{onClick:()=>C.chain().focus().toggleHeading({level:1}).run(),className:C.isActive("heading",{level:1})?"active":"",children:[(0,j.jsx)(v.A,{})," H1"]}),(0,j.jsxs)("button",{onClick:()=>C.chain().focus().toggleHeading({level:2}).run(),className:C.isActive("heading",{level:2})?"active":"",children:[(0,j.jsx)(v.A,{})," H2"]}),(0,j.jsxs)("button",{onClick:()=>C.chain().focus().toggleHeading({level:3}).run(),className:C.isActive("heading",{level:3})?"active":"",children:[(0,j.jsx)(v.A,{})," H3"]}),(0,j.jsx)("button",{onClick:()=>C.chain().focus().toggleBulletList().run(),className:C.isActive("bulletList")?"active":"",children:(0,j.jsx)(g.A,{})}),(0,j.jsx)("button",{onClick:()=>C.chain().focus().toggleOrderedList().run(),className:C.isActive("orderedList")?"active":"",children:(0,j.jsx)(p.A,{})}),(0,j.jsx)("button",{onClick:()=>C.chain().focus().toggleBlockquote().run(),className:C.isActive("blockquote")?"active":"",children:(0,j.jsx)(m.A,{})})]}),(0,j.jsx)("div",{children:(0,j.jsx)(n.$Z,{editor:C,"data-placeholder":"Start typing here...",className:"editor-content"})}),(0,j.jsxs)("div",{className:"character-count",children:[C.storage.characterCount.characters(),"/",f," characters"]})]}):null}},6455:(e,t,r)=>{r.d(t,{V:()=>o});var n=r(5043);const o=e=>{(0,n.useEffect)((()=>{if(!window.grecaptcha){const t=document.createElement("script");t.src="https://www.google.com/recaptcha/api.js?render=".concat(e),t.async=!0,t.defer=!0,document.body.appendChild(t)}}),[e])}},1759:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var n=r(3516),o=r(899),a=r(6216),c=r(457),i=r(6311),s=r(2900),l=r(4282);const d=["Action and Adventure","Adventure","Alternate History","Anthology","Art","Autobiography","Biography","Childrens","Classic","Comic/Graphic Novel","Contemporary","Crime","Drama","Dystopian","Epic","Erotic Fiction","Fable","Fairy Tale","Fantasy","Gothic Fiction","Historical Fiction","Horror","Humor","Inspirational","Journal","LGBT","Literary Fiction","Military/War Fiction","Mystery","Mythology","Noir","Paranormal Romance","Philosophical","Poetry","Political","Post-Apocalyptic","Psychological Thriller","Religious","Romance","Satire","Science Fiction","Self-help","Short Story","Speculative Fiction","Spiritual","Sports","Suspense/Thriller","Travel","True Crime","Western","Young Adult (YA)"];var u=r(8547),h=(r(4838),r(8729)),y=r(2915),x=r(1881),A=r(4743),v=r(2134);var g=r(6290),p=r(6455),m=r(6504),j=r(579);const f=o.Ik({title:o.Yj().required("Required").max(100,"Must be 100 characters or less"),description:o.Yj().required("Required").max(500,"Must be 450 characters or less"),content:o.Yj().required("Required"),genre:o.Yj().required("Required")}),C={title:"",description:"",content:"",genre:"",honeypot:""},b=()=>{(0,p.V)("6LfY0fooAAAAAKaljIbo723ZiMGApMCVg6ZU805o");const{addNotification:e}=(0,y.E)(),{user:t}=(0,h.A)(),r=!!t,{isDarkMode:o}=(0,g.D2)(),b=(e=>{const t=(0,v.Zp)(),[r]=(0,x.n)(A.dj,{update:(r,n)=>{let{data:{createStory:o}}=n;o.success?(e("".concat(o.story.title," created successfully!"),2e3,"success"),console.log("New Story ID:",o.story.id),t("/story/".concat(o.story.id))):(console.log("Failed to create story:",o.message),e("Story creation failed: ".concat(o.message),2e3,"error"));const{getAllStories:a}=r.readQuery({query:A.F4}),c=[...a,o.story];r.writeQuery({query:A.F4,data:{getAllStories:c}})}});return r})(e),N=(0,n.Wx)({initialValues:C,validationSchema:f,onSubmit:async t=>{if(console.log("Form submitted!",t),t.honeypot)return void console.log("Bot detected");let r;try{r=await(0,m.J)()}catch(n){return console.error("Error generating reCAPTCHA token:",n),void e("Failed to verify reCAPTCHA. Please try again.",3e3,"error")}try{await b({variables:{title:t.title,description:t.description,genre:t.genre,firstChapterContent:t.content,token:r}}),e("Story created successfully!",3e3,"success")}catch(n){console.error("Error creating story:",n),e("Failed to create story. Please try again.",3e3,"error")}}});if(!r)return(0,j.jsx)("p",{children:"You are not logged in."});return(0,j.jsxs)(a.A,{onSubmit:e=>{e.preventDefault(),N.handleSubmit(e)},children:[(0,j.jsxs)(c.A,{defaultActiveKey:"0",children:[(0,j.jsxs)(c.A.Item,{eventKey:"0",className:"".concat(o?"dark-mode":"light-mode"),children:[(0,j.jsx)(c.A.Header,{children:"Step 1: Basic Details"}),(0,j.jsxs)(c.A.Body,{children:[(0,j.jsxs)(a.A.Group,{controlId:"formTitle",children:[(0,j.jsx)(a.A.Label,{children:"Title"}),(0,j.jsx)(i.A,{type:"text",placeholder:"Give your story a cool title",name:"title",onChange:N.handleChange,onBlur:N.handleBlur,value:N.values.title}),(0,j.jsxs)("div",{className:"character-counter ".concat(N.values.title.length>80?"warning":""),children:[N.values.title.length,"/100 characters"]}),N.touched.title&&N.errors.title&&(0,j.jsx)(a.A.Text,{className:"text-danger",children:N.errors.title})]}),(0,j.jsxs)(a.A.Group,{controlId:"formDescription",children:[(0,j.jsx)(a.A.Label,{children:"Description"}),(0,j.jsx)(i.A,{as:"textarea",rows:4,placeholder:"Captivating description goes here!",name:"description",onChange:e=>{N.handleChange(e)},onBlur:N.handleBlur,value:N.values.description}),(0,j.jsxs)("div",{className:"character-counter ".concat(N.values.description.length>450?"warning":""),children:[N.values.description.length,"/500 characters"]}),N.touched.description&&N.errors.description&&(0,j.jsx)(a.A.Text,{className:"text-danger",children:N.errors.description})]}),(0,j.jsxs)(a.A.Group,{controlId:"formGenre",children:[(0,j.jsx)(a.A.Label,{children:"Genre"}),(0,j.jsxs)(s.A,{name:"genre",onChange:N.handleChange,onBlur:N.handleBlur,value:N.values.genre,className:"".concat(o?"dark-mode":"light-mode"),children:[(0,j.jsx)("option",{value:"",label:"Select genre"}),d.map((e=>(0,j.jsx)("option",{value:e,children:e},e)))]})]}),(0,j.jsx)(i.A,{type:"text",name:"honeypot",onChange:N.handleChange,value:N.values.honeypot,style:{display:"none"}})]})]}),(0,j.jsxs)(c.A.Item,{eventKey:"1",className:"".concat(o?"dark-mode":"light-mode"),children:[(0,j.jsx)(c.A.Header,{children:"Step 2: Story Content"}),(0,j.jsxs)(c.A.Body,{children:[(0,j.jsx)(u.A,{content:N.values.content,onUpdate:e=>{N.setFieldValue("content",e)},characterLimit:12e3}),N.touched.content&&N.errors.content&&(0,j.jsx)(a.A.Text,{className:"text-danger",children:N.errors.content})]})]})]}),(0,j.jsx)(l.A,{variant:"secondary",type:"submit",children:"Submit"})]})}},6504:(e,t,r)=>{r.d(t,{J:()=>n});const n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"submit";return new Promise(((t,r)=>{if(!window.grecaptcha)return r(new Error("reCAPTCHA not loaded yet"));window.grecaptcha.ready((()=>{window.grecaptcha.execute("6LfY0fooAAAAAKaljIbo723ZiMGApMCVg6ZU805o",{action:e}).then((e=>t(e))).catch((e=>r(e)))}))}))}},457:(e,t,r)=>{r.d(t,{A:()=>S});var n=r(8139),o=r.n(n),a=r(5043),c=r(7121),i=r(7852),s=r(2306);function l(e,t){return Array.isArray(e)?e.includes(t):e===t}const d=a.createContext({});d.displayName="AccordionContext";const u=d;var h=r(579);const y=a.forwardRef(((e,t)=>{let{as:r="div",bsPrefix:n,className:c,children:d,eventKey:y,...x}=e;const{activeEventKey:A}=(0,a.useContext)(u);return n=(0,i.oU)(n,"accordion-collapse"),(0,h.jsx)(s.A,{ref:t,in:l(A,y),...x,className:o()(c,n),children:(0,h.jsx)(r,{children:a.Children.only(d)})})}));y.displayName="AccordionCollapse";const x=y,A=a.createContext({eventKey:""});A.displayName="AccordionItemContext";const v=A,g=a.forwardRef(((e,t)=>{let{as:r="div",bsPrefix:n,className:c,onEnter:s,onEntering:l,onEntered:d,onExit:u,onExiting:y,onExited:A,...g}=e;n=(0,i.oU)(n,"accordion-body");const{eventKey:p}=(0,a.useContext)(v);return(0,h.jsx)(x,{eventKey:p,onEnter:s,onEntering:l,onEntered:d,onExit:u,onExiting:y,onExited:A,children:(0,h.jsx)(r,{ref:t,...g,className:o()(c,n)})})}));g.displayName="AccordionBody";const p=g;const m=a.forwardRef(((e,t)=>{let{as:r="button",bsPrefix:n,className:c,onClick:s,...d}=e;n=(0,i.oU)(n,"accordion-button");const{eventKey:y}=(0,a.useContext)(v),x=function(e,t){const{activeEventKey:r,onSelect:n,alwaysOpen:o}=(0,a.useContext)(u);return a=>{let c=e===r?null:e;o&&(c=Array.isArray(r)?r.includes(e)?r.filter((t=>t!==e)):[...r,e]:[e]),null==n||n(c,a),null==t||t(a)}}(y,s),{activeEventKey:A}=(0,a.useContext)(u);return"button"===r&&(d.type="button"),(0,h.jsx)(r,{ref:t,onClick:x,...d,"aria-expanded":Array.isArray(A)?A.includes(y):y===A,className:o()(c,n,!l(A,y)&&"collapsed")})}));m.displayName="AccordionButton";const j=m,f=a.forwardRef(((e,t)=>{let{as:r="h2","aria-controls":n,bsPrefix:a,className:c,children:s,onClick:l,...d}=e;return a=(0,i.oU)(a,"accordion-header"),(0,h.jsx)(r,{ref:t,...d,className:o()(c,a),children:(0,h.jsx)(j,{onClick:l,"aria-controls":n,children:s})})}));f.displayName="AccordionHeader";const C=f,b=a.forwardRef(((e,t)=>{let{as:r="div",bsPrefix:n,className:c,eventKey:s,...l}=e;n=(0,i.oU)(n,"accordion-item");const d=(0,a.useMemo)((()=>({eventKey:s})),[s]);return(0,h.jsx)(v.Provider,{value:d,children:(0,h.jsx)(r,{ref:t,...l,className:o()(c,n)})})}));b.displayName="AccordionItem";const N=b,w=a.forwardRef(((e,t)=>{const{as:r="div",activeKey:n,bsPrefix:s,className:l,onSelect:d,flush:y,alwaysOpen:x,...A}=(0,c.Zw)(e,{activeKey:"onSelect"}),v=(0,i.oU)(s,"accordion"),g=(0,a.useMemo)((()=>({activeEventKey:n,onSelect:d,alwaysOpen:x})),[n,d,x]);return(0,h.jsx)(u.Provider,{value:g,children:(0,h.jsx)(r,{ref:t,...A,className:o()(l,v,y&&"".concat(v,"-flush"))})})}));w.displayName="Accordion";const S=Object.assign(w,{Button:j,Collapse:x,Item:N,Header:C,Body:p})},4838:()=>{}}]);
//# sourceMappingURL=759.d0600b59.chunk.js.map