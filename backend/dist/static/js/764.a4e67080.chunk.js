"use strict";(self.webpackChunktheplotpot_frontend=self.webpackChunktheplotpot_frontend||[]).push([[764],{6916:(e,n,t)=>{t.d(n,{Z:()=>c});t(2791);var r=t(7022),s=t(18),a=t(3360),l=t(184);const c=e=>{let{message:n,onRetry:t}=e;return(0,l.jsx)(r.Z,{className:"mt-5",children:(0,l.jsxs)(s.Z,{variant:"danger",children:[(0,l.jsx)(s.Z.Heading,{children:"Oh snap! An error occurred."}),(0,l.jsx)("p",{children:n||"Something went wrong. Please try again later."}),t&&(0,l.jsx)(a.Z,{variant:"primary",onClick:t,children:"Retry"})]})})}},764:(e,n,t)=>{t.r(n),t.d(n,{default:()=>P});var r=t(6578),s=t(9007),a=t(2791);const l=function(e,n){const t=(0,a.useRef)(!0);(0,a.useEffect)((()=>{if(!t.current)return e();t.current=!1}),n)};var c=t(7904),i=t(9726),o=t(6445),d=t(1694),u=t.n(d),h=t(239),x=t(162),m=t(184);const v=a.forwardRef(((e,n)=>{let{className:t,bsPrefix:r,as:s="div",...a}=e;return r=(0,x.vE)(r,"carousel-caption"),(0,m.jsx)(s,{ref:n,className:u()(t,r),...a})}));v.displayName="CarouselCaption";const f=v,p=a.forwardRef(((e,n)=>{let{as:t="div",bsPrefix:r,className:s,...a}=e;const l=u()(s,(0,x.vE)(r,"carousel-item"));return(0,m.jsx)(t,{ref:n,...a,className:l})}));p.displayName="CarouselItem";const j=p;var y=t(1701),N=t(1380),g=t(7202),b=t(4083);const Z=a.forwardRef(((e,n)=>{let{defaultActiveIndex:t=0,...r}=e;const{as:d="div",bsPrefix:v,slide:f=!0,fade:p=!1,controls:j=!0,indicators:Z=!0,indicatorLabels:C=[],activeIndex:w,onSelect:k,onSlide:E,onSlid:S,interval:R=5e3,keyboard:I=!0,onKeyDown:A,pause:T="hover",onMouseOver:P,onMouseOut:D,wrap:L=!0,touch:M=!0,onTouchStart:O,onTouchMove:U,onTouchEnd:H,prevIcon:B=(0,m.jsx)("span",{"aria-hidden":"true",className:"carousel-control-prev-icon"}),prevLabel:V="Previous",nextIcon:G=(0,m.jsx)("span",{"aria-hidden":"true",className:"carousel-control-next-icon"}),nextLabel:X="Next",variant:F,className:K,children:W,..._}=(0,h.Ch)({defaultActiveIndex:t,...r},{activeIndex:"onSelect"}),z=(0,x.vE)(v,"carousel"),q=(0,x.SC)(),J=(0,a.useRef)(null),[Q,Y]=(0,a.useState)("next"),[$,ee]=(0,a.useState)(!1),[ne,te]=(0,a.useState)(!1),[re,se]=(0,a.useState)(w||0);(0,a.useEffect)((()=>{ne||w===re||(J.current?Y(J.current):Y((w||0)>re?"next":"prev"),f&&te(!0),se(w||0))}),[w,ne,re,f]),(0,a.useEffect)((()=>{J.current&&(J.current=null)}));let ae,le=0;(0,y.Ed)(W,((e,n)=>{++le,n===w&&(ae=e.props.interval)}));const ce=(0,c.Z)(ae),ie=(0,a.useCallback)((e=>{if(ne)return;let n=re-1;if(n<0){if(!L)return;n=le-1}J.current="prev",null==k||k(n,e)}),[ne,re,k,L,le]),oe=(0,s.Z)((e=>{if(ne)return;let n=re+1;if(n>=le){if(!L)return;n=0}J.current="next",null==k||k(n,e)})),de=(0,a.useRef)();(0,a.useImperativeHandle)(n,(()=>({element:de.current,prev:ie,next:oe})));const ue=(0,s.Z)((()=>{!document.hidden&&function(e){if(!e||!e.style||!e.parentNode||!e.parentNode.style)return!1;const n=getComputedStyle(e);return"none"!==n.display&&"hidden"!==n.visibility&&"none"!==getComputedStyle(e.parentNode).display}(de.current)&&(q?ie():oe())})),he="next"===Q?"start":"end";l((()=>{f||(null==E||E(re,he),null==S||S(re,he))}),[re]);const xe="".concat(z,"-item-").concat(Q),me="".concat(z,"-item-").concat(he),ve=(0,a.useCallback)((e=>{(0,g.Z)(e),null==E||E(re,he)}),[E,re,he]),fe=(0,a.useCallback)((()=>{te(!1),null==S||S(re,he)}),[S,re,he]),pe=(0,a.useCallback)((e=>{if(I&&!/input|textarea/i.test(e.target.tagName))switch(e.key){case"ArrowLeft":return e.preventDefault(),void(q?oe(e):ie(e));case"ArrowRight":return e.preventDefault(),void(q?ie(e):oe(e))}null==A||A(e)}),[I,A,ie,oe,q]),je=(0,a.useCallback)((e=>{"hover"===T&&ee(!0),null==P||P(e)}),[T,P]),ye=(0,a.useCallback)((e=>{ee(!1),null==D||D(e)}),[D]),Ne=(0,a.useRef)(0),ge=(0,a.useRef)(0),be=(0,i.Z)(),Ze=(0,a.useCallback)((e=>{Ne.current=e.touches[0].clientX,ge.current=0,"hover"===T&&ee(!0),null==O||O(e)}),[T,O]),Ce=(0,a.useCallback)((e=>{e.touches&&e.touches.length>1?ge.current=0:ge.current=e.touches[0].clientX-Ne.current,null==U||U(e)}),[U]),we=(0,a.useCallback)((e=>{if(M){const n=ge.current;Math.abs(n)>40&&(n>0?ie(e):oe(e))}"hover"===T&&be.set((()=>{ee(!1)}),R||void 0),null==H||H(e)}),[M,T,ie,oe,be,R,H]),ke=null!=R&&!$&&!ne,Ee=(0,a.useRef)();(0,a.useEffect)((()=>{var e,n;if(!ke)return;const t=q?ie:oe;return Ee.current=window.setInterval(document.visibilityState?ue:t,null!=(e=null!=(n=ce.current)?n:R)?e:void 0),()=>{null!==Ee.current&&clearInterval(Ee.current)}}),[ke,ie,oe,ce,R,ue,q]);const Se=(0,a.useMemo)((()=>Z&&Array.from({length:le},((e,n)=>e=>{null==k||k(n,e)}))),[Z,le,k]);return(0,m.jsxs)(d,{ref:de,..._,onKeyDown:pe,onMouseOver:je,onMouseOut:ye,onTouchStart:Ze,onTouchMove:Ce,onTouchEnd:we,className:u()(K,z,f&&"slide",p&&"".concat(z,"-fade"),F&&"".concat(z,"-").concat(F)),children:[Z&&(0,m.jsx)("div",{className:"".concat(z,"-indicators"),children:(0,y.UI)(W,((e,n)=>(0,m.jsx)("button",{type:"button","data-bs-target":"","aria-label":null!=C&&C.length?C[n]:"Slide ".concat(n+1),className:n===re?"active":void 0,onClick:Se?Se[n]:void 0,"aria-current":n===re},n)))}),(0,m.jsx)("div",{className:"".concat(z,"-inner"),children:(0,y.UI)(W,((e,n)=>{const t=n===re;return f?(0,m.jsx)(b.Z,{in:t,onEnter:t?ve:void 0,onEntered:t?fe:void 0,addEndListener:N.Z,children:(n,r)=>a.cloneElement(e,{...r,className:u()(e.props.className,t&&"entered"!==n&&xe,("entered"===n||"exiting"===n)&&"active",("entering"===n||"exiting"===n)&&me)})}):a.cloneElement(e,{className:u()(e.props.className,t&&"active")})}))}),j&&(0,m.jsxs)(m.Fragment,{children:[(L||0!==w)&&(0,m.jsxs)(o.Z,{className:"".concat(z,"-control-prev"),onClick:ie,children:[B,V&&(0,m.jsx)("span",{className:"visually-hidden",children:V})]}),(L||w!==le-1)&&(0,m.jsxs)(o.Z,{className:"".concat(z,"-control-next"),onClick:oe,children:[G,X&&(0,m.jsx)("span",{className:"visually-hidden",children:X})]})]})]})}));Z.displayName="Carousel";const C=Object.assign(Z,{Caption:f,Item:j});var w=t(5070),k=t(3360);const E=a.forwardRef(((e,n)=>{let{className:t,bsPrefix:r,as:s="div",...a}=e;return r=(0,x.vE)(r,"card-group"),(0,m.jsx)(s,{ref:n,className:u()(t,r),...a})}));E.displayName="CardGroup";const S=E;var R=t(9829),I=t(1087),A=t(6916);const T=()=>(0,m.jsx)("div",{style:{backgroundColor:"#e0e0e0",height:"100%",width:"100%"}}),P=()=>{const{loading:e,error:n,data:t}=(0,r.a)(R.Dz);if(n)return(0,m.jsx)(A.Z,{message:n.message});let s=[];if(t){s=[...t.getAllStories].sort(((e,n)=>n.id-e.id)).slice(0,9)}return(0,m.jsxs)("div",{className:"home-container",children:[(0,m.jsxs)("section",{className:"carousel-section",children:[(0,m.jsx)("h2",{className:"carousel-heading",children:"Featured Stories"}),(0,m.jsx)(C,{className:"carousel",controls:!0,indicators:!0,keyboard:!0,slide:!1,"data-bs-theme":"dark",children:e?Array(5).fill(null).map(((e,n)=>(0,m.jsx)(C.Item,{children:(0,m.jsx)(T,{})},n))):t.getAllStories.slice(0,5).map(((e,n)=>(0,m.jsx)(C.Item,{children:(0,m.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"400px",width:"100%"},children:(0,m.jsxs)(w.Z,{className:"shadow",style:{textAlign:"center",width:"80%",minHeight:"70%"},children:[0===n&&(0,m.jsx)("span",{className:"badge badge-secondary badge-corner",children:"Top Story"}),(0,m.jsxs)(w.Z.Body,{children:[(0,m.jsx)(w.Z.Title,{children:e.title}),(0,m.jsx)(w.Z.Text,{children:e.description}),(0,m.jsxs)(w.Z.Text,{children:["Genre: ",e.genre]}),(0,m.jsx)(w.Z.Text,{children:(0,m.jsxs)("small",{className:"text-muted",children:["By:",(0,m.jsx)(I.rU,{style:{color:"inherit",textDecoration:"inherit"},to:"/user/".concat(e.author.id),children:e.author.username})," "]})}),(0,m.jsx)(I.rU,{to:"/story/".concat(e.id),children:(0,m.jsx)(k.Z,{variant:"secondary",children:"Read Story"})})]})]})})},e.id)))})]}),(0,m.jsxs)("section",{className:"stories-grid",children:[(0,m.jsx)("h2",{className:"carousel-heading",children:"Recent Stories"}),(0,m.jsx)("div",{className:"card-grid-container",children:(0,m.jsx)(S,{children:e?Array(9).fill(null).map(((e,n)=>(0,m.jsx)(w.Z,{className:"shadow",style:{margin:"15px"},children:(0,m.jsx)(T,{})},n))):s.map((e=>(0,m.jsx)(w.Z,{className:"shadow",style:{margin:"15px",maxWidth:"600px"},children:(0,m.jsxs)(w.Z.Body,{children:[(0,m.jsx)(w.Z.Title,{children:e.title}),(0,m.jsx)(w.Z.Text,{children:e.description}),(0,m.jsxs)(w.Z.Text,{children:["Genre: ",e.genre]}),(0,m.jsx)(w.Z.Text,{children:(0,m.jsxs)("small",{className:"text-muted",children:["By: ",(0,m.jsx)(I.rU,{style:{color:"inherit",textDecoration:"inherit"},to:"/user/".concat(e.author.id),children:e.author.username})]})}),(0,m.jsx)(I.rU,{to:"/story/".concat(e.id),children:(0,m.jsx)(k.Z,{variant:"secondary",children:"Read Story"})})]})},e.id)))})})]})]})}},18:(e,n,t)=>{t.d(n,{Z:()=>N});var r=t(1694),s=t.n(r),a=t(2791),l=t(239),c=t(9007),i=t(162),o=t(7472),d=t(184);const u=(0,o.Z)("h4");u.displayName="DivStyledAsH4";const h=a.forwardRef(((e,n)=>{let{className:t,bsPrefix:r,as:a=u,...l}=e;return r=(0,i.vE)(r,"alert-heading"),(0,d.jsx)(a,{ref:n,className:s()(t,r),...l})}));h.displayName="AlertHeading";const x=h;var m=t(6445);const v=a.forwardRef(((e,n)=>{let{className:t,bsPrefix:r,as:a=m.Z,...l}=e;return r=(0,i.vE)(r,"alert-link"),(0,d.jsx)(a,{ref:n,className:s()(t,r),...l})}));v.displayName="AlertLink";const f=v;var p=t(2709),j=t(473);const y=a.forwardRef(((e,n)=>{const{bsPrefix:t,show:r=!0,closeLabel:a="Close alert",closeVariant:o,className:u,children:h,variant:x="primary",onClose:m,dismissible:v,transition:f=p.Z,...y}=(0,l.Ch)(e,{show:"onClose"}),N=(0,i.vE)(t,"alert"),g=(0,c.Z)((e=>{m&&m(!1,e)})),b=!0===f?p.Z:f,Z=(0,d.jsxs)("div",{role:"alert",...b?void 0:y,ref:n,className:s()(u,N,x&&"".concat(N,"-").concat(x),v&&"".concat(N,"-dismissible")),children:[v&&(0,d.jsx)(j.Z,{onClick:g,"aria-label":a,variant:o}),h]});return b?(0,d.jsx)(b,{unmountOnExit:!0,...y,ref:void 0,in:r,children:Z}):r?Z:null}));y.displayName="Alert";const N=Object.assign(y,{Link:f,Heading:x})},1701:(e,n,t)=>{t.d(n,{Ed:()=>a,UI:()=>s,XW:()=>l});var r=t(2791);function s(e,n){let t=0;return r.Children.map(e,(e=>r.isValidElement(e)?n(e,t++):e))}function a(e,n){let t=0;r.Children.forEach(e,(e=>{r.isValidElement(e)&&n(e,t++)}))}function l(e,n){return r.Children.toArray(e).some((e=>r.isValidElement(e)&&e.type===n))}}}]);
//# sourceMappingURL=764.a4e67080.chunk.js.map