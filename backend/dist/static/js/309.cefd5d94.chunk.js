"use strict";(self.webpackChunktheplotpot_frontend=self.webpackChunktheplotpot_frontend||[]).push([[309],{2309:function(e,t,r){r.r(t),r.d(t,{default:function(){return T}});var n=r(4165),i=r(5861),o=r(9439),a=r(2791),l=r(5705),s=r(8007),c=r(6714),u=r(2298),h=r(5474),d=r(1610),p=r(3360),y=["Action and Adventure","Adventure","Alternate History","Anthology","Art","Autobiography","Biography","Childrens","Classic","Comic/Graphic Novel","Contemporary","Crime","Drama","Dystopian","Epic","Erotic Fiction","Fable","Fairy Tale","Fantasy","Gothic Fiction","Historical Fiction","Horror","Humor","Inspirational","Journal","LGBT","Literary Fiction","Military/War Fiction","Mystery","Mythology","Noir","Paranormal Romance","Philosophical","Poetry","Political","Post-Apocalyptic","Psychological Thriller","Religious","Romance","Satire","Science Fiction","Self-help","Short Story","Speculative Fiction","Spiritual","Sports","Suspense/Thriller","Travel","True Crime","Western","Young Adult (YA)"],g=r(6770),v=r.n(g),m=(r(215),r(1684),r(8281),r(3812)),f=r(8261),x=r(3433),C=r(4376),b=r(9829),S=r(7689),Z=r(184),A=s.Ry({title:s.Z_().required("Required").max(100,"Must be 100 characters or less"),description:s.Z_().required("Required").max(500,"Must be 450 characters or less"),content:s.Z_().required("Required"),genre:s.Z_().required("Required")}),j={title:"",description:"",content:"",genre:"",honeypot:""},q={characterCounter:{container:"#character-count",maxChars:12e3},toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","blockquote"],[{list:"ordered"},{list:"bullet"}]]},T=function(){var e=(0,f.z)().addNotification,t=!!(0,m.a)().user,r=(0,a.useState)("disabled"),s=(0,o.Z)(r,2),g=s[0],T=s[1],k=function(e){var t=(0,S.s0)(),r=(0,C.D)(b.pk,{update:function(r,n){var i=n.data.createStory;i.success?(e("".concat(i.story.title," created successfully!"),2e3,"success"),console.log("New Story ID:",i.story.id),t("/story/".concat(i.story.id))):(console.log("Failed to create story:",i.message),e("Story creation failed: ".concat(i.message),2e3,"error"));var o=r.readQuery({query:b.Dz}).getAllStories,a=[].concat((0,x.Z)(o),[i.story]);r.writeQuery({query:b.Dz,data:{getAllStories:a}})}});return(0,o.Z)(r,1)[0]}(e),F=(0,l.TA)({initialValues:j,validationSchema:A,onSubmit:function(t){t.honeypot?console.log("Bot detected"):grecaptcha.ready((0,i.Z)((0,n.Z)().mark((function r(){var i;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,grecaptcha.execute("6LfY0fooAAAAAKaljIbo723ZiMGApMCVg6ZU805o",{action:"submit"});case 2:i=r.sent,k({variables:{title:t.title,description:t.description,genre:t.genre,firstChapterContent:t.content,token:i}}).catch((function(t){console.error("There was an error creating the chapter:",t),e(t.message,3e3,"error")}));case 4:case"end":return r.stop()}}),r)}))))}});if((0,a.useEffect)((function(){F.values.title&&F.values.description&&F.values.genre?T(""):T("disabled")}),[F.values.title,F.values.description,F.values.genre]),!t)return(0,Z.jsx)("p",{children:"You are not logged in."});var w=[{key:"1",label:"Step 1: Basic Details",children:(0,Z.jsxs)(c.Z,{layout:"vertical",onSubmit:F.handleSubmit,className:"mx-2",children:[(0,Z.jsx)(c.Z.Item,{label:"Title",help:F.touched.title&&F.errors.title,children:(0,Z.jsx)(u.Z,{type:"text",name:"title",placeholder:"Give your story a cool title",onChange:F.handleChange,onBlur:F.handleBlur,value:F.values.title})}),(0,Z.jsx)(c.Z.Item,{label:"Description",help:F.touched.description&&F.errors.description,children:(0,Z.jsx)(u.Z.TextArea,{name:"description",placeholder:"Captivating description goes here!",onChange:F.handleChange,onBlur:F.handleBlur,value:F.values.description,rows:4})}),(0,Z.jsx)(c.Z.Item,{style:{display:"none"},children:(0,Z.jsx)(u.Z,{type:"text",name:"honeypot",onChange:F.handleChange,onBlur:F.handleBlur,value:F.values.honeypot})}),(0,Z.jsx)(c.Z.Item,{label:"Genre",help:F.touched.genre&&F.errors.genre,children:(0,Z.jsx)(h.Z,{value:F.values.genre,onChange:function(e){return F.setFieldValue("genre",e)},style:{width:"100%"},options:y.map((function(e){return{value:e}})),placeholder:"Select a genre",filterOption:function(e,t){return t.value.toUpperCase().includes(e.toUpperCase())}})})]})},{key:"2",collapsible:g,label:"Step 2: Story Content",children:(0,Z.jsxs)("div",{className:"mx-2",children:[(0,Z.jsx)(v(),{value:F.values.content,onChange:function(e){return F.setFieldValue("content",e)},theme:"snow",modules:q}),(0,Z.jsx)("div",{id:"character-count"}),(0,Z.jsx)(p.Z,{variant:"secondary",onClick:function(){return F.handleSubmit()},children:"Submit"})]})}];return(0,Z.jsx)(d.Z,{items:w,defaultActiveKey:["1"]})}},1684:function(e,t,r){var n=r(5671),i=r(3144),o=r(6921),a=r.n(o),l=function(){function e(t,r){(0,n.Z)(this,e),this.quill=t,this.options=r,this.container=document.querySelector(r.container),t.on("text-change",this.update.bind(this)),this.update()}return(0,i.Z)(e,[{key:"calculate",value:function(){return this.quill.getText().length}},{key:"update",value:function(){var e=this.calculate();if(e>this.options.maxChars){var t=this.quill.getText().substring(0,this.options.maxChars);this.quill.setText(t)}this.container.innerText=e+" / "+this.options.maxChars}}]),e}();a().register("modules/characterCounter",l)},8281:function(){}}]);
//# sourceMappingURL=309.cefd5d94.chunk.js.map