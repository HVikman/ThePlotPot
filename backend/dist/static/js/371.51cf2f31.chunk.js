"use strict";(self.webpackChunktheplotpot_frontend=self.webpackChunktheplotpot_frontend||[]).push([[371],{7371:function(e,r,n){n.r(r),n.d(r,{default:function(){return U}});var t=n(4165),a=n(1413),s=n(5861),o=n(9439),l=n(2791),i=n(5705),c=n(8007),u=n(4376),d=n(9829),p=n(7689),m=n(3812),h=n(7022),f=n(9795),v=n(9410),x=n(3360),g=n(2469),Z=n(8261),b=n(2007),j=n.n(b),y=["color","size","title"];function w(){return w=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},w.apply(this,arguments)}function O(e,r){if(null==e)return{};var n,t,a=function(e,r){if(null==e)return{};var n,t,a={},s=Object.keys(e);for(t=0;t<s.length;t++)n=s[t],r.indexOf(n)>=0||(a[n]=e[n]);return a}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)n=s[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var C=(0,l.forwardRef)((function(e,r){var n=e.color,t=e.size,a=e.title,s=O(e,y);return l.createElement("svg",w({ref:r,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:t,height:t,fill:n},s),a?l.createElement("title",null,a):null,l.createElement("path",{d:"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3Zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}))}));C.propTypes={color:j().string,size:j().oneOfType([j().string,j().number]),title:j().string},C.defaultProps={color:"currentColor",size:"1em",title:null};var P=C,k=["color","size","title"];function E(){return E=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},E.apply(this,arguments)}function z(e,r){if(null==e)return{};var n,t,a=function(e,r){if(null==e)return{};var n,t,a={},s=Object.keys(e);for(t=0;t<s.length;t++)n=s[t],r.indexOf(n)>=0||(a[n]=e[n]);return a}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)n=s[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var N=(0,l.forwardRef)((function(e,r){var n=e.color,t=e.size,a=e.title,s=z(e,k);return l.createElement("svg",E({ref:r,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:t,height:t,fill:n},s),a?l.createElement("title",null,a):null,l.createElement("path",{d:"M3.5 11.5a3.5 3.5 0 1 1 3.163-5H14L15.5 8 14 9.5l-1-1-1 1-1-1-1 1-1-1-1 1H6.663a3.5 3.5 0 0 1-3.163 2zM2.5 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"}))}));N.propTypes={color:j().string,size:j().oneOfType([j().string,j().number]),title:j().string},N.defaultProps={color:"currentColor",size:"1em",title:null};var B=N,S=n(184),I=c.Ry().shape({username:c.Z_().min(3,"Username must be at least 3 characters").required("Username is required"),email:c.Z_().email("Invalid email").required("Email is required"),password:c.Z_().min(6,"Password must be at least 6 characters").required("Password is required")}),U=function(){var e=(0,Z.z)().addNotification,r=(0,l.useState)(null),n=(0,o.Z)(r,2),c=n[0],b=n[1],j=(0,u.D)(d.Rw,{update:function(r,n){var t=n.data;t.createUser.success?(e("Signup successful: ".concat(t.createUser.user.username)),C(t.createUser.user),E("/")):b(t.createUser.message)},onError:function(r){e("Something went wrong: ".concat(r),2e3,"error")}}),y=(0,o.Z)(j,1)[0],w=(0,m.a)(),O=w.user,C=w.setUser,k=!!O,E=(0,p.s0)(),z=(0,i.TA)({initialValues:{username:"",email:"",password:"",honeypot:""},validationSchema:I,onSubmit:function(){var e=(0,s.Z)((0,t.Z)().mark((function e(r){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.honeypot){e.next=3;break}return console.log("Bot detected"),e.abrupt("return");case 3:grecaptcha.ready((0,s.Z)((0,t.Z)().mark((function e(){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,grecaptcha.execute("6LfY0fooAAAAAKaljIbo723ZiMGApMCVg6ZU805o",{action:"submit"});case 2:n=e.sent,y({variables:(0,a.Z)((0,a.Z)({},r),{},{token:n})});case 4:case"end":return e.stop()}}),e)}))));case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()});return k?(E("/"),(0,S.jsx)("p",{children:"You are already logged in."})):(0,S.jsxs)(h.Z,{style:{maxWidth:"400px",marginTop:"50px"},children:[(0,S.jsxs)(f.Z,{onSubmit:z.handleSubmit,children:[(0,S.jsxs)(f.Z.Group,{controlId:"formBasicUsername",className:"mt-4 custom-form",children:[(0,S.jsx)(f.Z.Label,{children:"Username"}),(0,S.jsxs)(v.Z,{className:"mb-3",children:[(0,S.jsx)(v.Z.Text,{children:(0,S.jsx)(P,{})}),(0,S.jsx)(f.Z.Control,{type:"text",name:"username",value:z.values.username,onChange:z.handleChange,onBlur:z.handleBlur,isInvalid:z.touched.username&&z.errors.username,placeholder:"Username"}),(0,S.jsx)(f.Z.Control.Feedback,{type:"invalid",children:z.errors.username})]})]}),(0,S.jsxs)(f.Z.Group,{controlId:"formBasicEmail",className:"mt-4 custom-form",children:[(0,S.jsx)(f.Z.Label,{children:"Email address"}),(0,S.jsxs)(v.Z,{className:"mb-3",children:[(0,S.jsx)(v.Z.Text,{children:"@"}),(0,S.jsx)(f.Z.Control,{type:"email",name:"email",value:z.values.email,onChange:z.handleChange,onBlur:z.handleBlur,isInvalid:z.touched.email&&z.errors.email,placeholder:"Enter email"}),(0,S.jsx)(f.Z.Control.Feedback,{type:"invalid",children:z.errors.email})]})]}),(0,S.jsxs)(f.Z.Group,{controlId:"formBasicPassword",className:"mt-4 custom-form",children:[(0,S.jsx)(f.Z.Label,{children:"Password"}),(0,S.jsxs)(v.Z,{className:"mb-3",children:[(0,S.jsx)(v.Z.Text,{children:(0,S.jsx)(B,{})}),(0,S.jsx)(f.Z.Control,{type:"password",name:"password",value:z.values.password,onChange:z.handleChange,onBlur:z.handleBlur,isInvalid:z.touched.password&&z.errors.password,placeholder:"Password"}),(0,S.jsx)(f.Z.Control.Feedback,{type:"invalid",children:z.errors.password})]})]}),(0,S.jsx)(f.Z.Control,{style:{display:"none"},name:"honeypot",onChange:z.handleChange,value:z.values.honeypot}),(0,S.jsx)(x.Z,{variant:"secondary",className:"mt-2",type:"submit",children:"Signup"})]}),c&&(0,S.jsx)(g.Z,{variant:"danger",className:"mt-3",children:c})]})}},9410:function(e,r,n){var t=n(5987),a=n(1413),s=n(1694),o=n.n(s),l=n(2791),i=n(6543),c=n(162),u=n(6882),d=n(1991),p=n(184),m=["bsPrefix","size","hasValidation","className","as"],h=(0,i.Z)("input-group-text",{Component:"span"}),f=l.forwardRef((function(e,r){var n=e.bsPrefix,s=e.size,i=e.hasValidation,u=e.className,h=e.as,f=void 0===h?"div":h,v=(0,t.Z)(e,m);n=(0,c.vE)(n,"input-group");var x=(0,l.useMemo)((function(){return{}}),[]);return(0,p.jsx)(d.Z.Provider,{value:x,children:(0,p.jsx)(f,(0,a.Z)((0,a.Z)({ref:r},v),{},{className:o()(u,n,s&&"".concat(n,"-").concat(s),i&&"has-validation")}))})}));f.displayName="InputGroup",r.Z=Object.assign(f,{Text:h,Radio:function(e){return(0,p.jsx)(h,{children:(0,p.jsx)(u.Z,(0,a.Z)({type:"radio"},e))})},Checkbox:function(e){return(0,p.jsx)(h,{children:(0,p.jsx)(u.Z,(0,a.Z)({type:"checkbox"},e))})}})}}]);
//# sourceMappingURL=371.51cf2f31.chunk.js.map