"use strict";(self.webpackChunktheplotpot_frontend=self.webpackChunktheplotpot_frontend||[]).push([[702],{8702:(e,t,r)=>{r.r(t),r.d(t,{default:()=>S});var o=r(3516),i=r(899),a=r(457),n=r(5211),s=r(6311),l=r(4282);const c=["Action and Adventure","Adventure","Alternate History","Anthology","Art","Autobiography","Biography","Childrens","Classic","Comic/Graphic Novel","Contemporary","Crime","Drama","Dystopian","Epic","Erotic Fiction","Fable","Fairy Tale","Fantasy","Gothic Fiction","Historical Fiction","Horror","Humor","Inspirational","Journal","LGBT","Literary Fiction","Military/War Fiction","Mystery","Mythology","Noir","Paranormal Romance","Philosophical","Poetry","Political","Post-Apocalyptic","Psychological Thriller","Religious","Romance","Satire","Science Fiction","Self-help","Short Story","Speculative Fiction","Spiritual","Sports","Suspense/Thriller","Travel","True Crime","Western","Young Adult (YA)"];var d=r(2823),h=r.n(d),u=(r(7590),r(1393),r(583),r(2855)),p=r(1898),y=r(1881),g=r(4743),m=r(3216);var A=r(6133),x=r(579);const j={characterCounter:{container:"#character-count",maxChars:12e3},toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","blockquote"],[{list:"ordered"},{list:"bullet"}]]},v=i.Ik({title:i.Yj().required("Required").max(100,"Must be 100 characters or less"),description:i.Yj().required("Required").max(500,"Must be 450 characters or less"),content:i.Yj().required("Required"),genre:i.Yj().required("Required")}),C={title:"",description:"",content:"",genre:"",honeypot:""},S=()=>{const{addNotification:e}=(0,p.E)(),{user:t}=(0,u.A)(),r=!!t,{isDarkMode:i}=(0,A.D2)(),d=(e=>{const t=(0,m.Zp)(),[r]=(0,y.n)(g.dj,{update:(r,o)=>{let{data:{createStory:i}}=o;i.success?(e("".concat(i.story.title," created successfully!"),2e3,"success"),console.log("New Story ID:",i.story.id),t("/story/".concat(i.story.id))):(console.log("Failed to create story:",i.message),e("Story creation failed: ".concat(i.message),2e3,"error"));const{getAllStories:a}=r.readQuery({query:g.F4}),n=[...a,i.story];r.writeQuery({query:g.F4,data:{getAllStories:n}})}});return r})(e),S=(0,o.Wx)({initialValues:C,validationSchema:v,onSubmit:t=>{t.honeypot?console.log("Bot detected"):grecaptcha.ready((async()=>{const r=await grecaptcha.execute("6LfY0fooAAAAAKaljIbo723ZiMGApMCVg6ZU805o",{action:"submit"});d({variables:{title:t.title,description:t.description,genre:t.genre,firstChapterContent:t.content,token:r}}).catch((t=>{console.error("There was an error creating the chapter:",t),e(t.message,3e3,"error")}))}))}});return r?(0,x.jsxs)(a.A,{defaultActiveKey:"0",children:[(0,x.jsxs)(a.A.Item,{eventKey:"0",className:"".concat(i?"dark-mode":"light-mode"),children:[(0,x.jsx)(a.A.Header,{children:"Step 1: Basic Details"}),(0,x.jsx)(a.A.Body,{children:(0,x.jsxs)(n.A,{onSubmit:S.handleSubmit,children:[(0,x.jsxs)(n.A.Group,{controlId:"formTitle",children:[(0,x.jsx)(n.A.Label,{children:"Title"}),(0,x.jsx)(s.A,{type:"text",placeholder:"Give your story a cool title",name:"title",onChange:S.handleChange,value:S.values.title})]}),(0,x.jsxs)(n.A.Group,{controlId:"formDescription",children:[(0,x.jsx)(n.A.Label,{children:"Description"}),(0,x.jsx)(s.A,{as:"textarea",rows:4,placeholder:"Captivating description goes here!",name:"description",onChange:S.handleChange,value:S.values.description})]}),(0,x.jsxs)(n.A.Group,{controlId:"formGenre",children:[(0,x.jsx)(n.A.Label,{children:"Genre"}),(0,x.jsx)(s.A,{as:"select",name:"genre",onChange:S.handleChange,value:S.values.genre,children:c.map((e=>(0,x.jsx)("option",{value:e,children:e},e)))})]})]})})]}),(0,x.jsxs)(a.A.Item,{eventKey:"1",className:"".concat(i?"dark-mode":"light-mode"),children:[(0,x.jsx)(a.A.Header,{children:"Step 2: Story Content"}),(0,x.jsxs)(a.A.Body,{children:[(0,x.jsx)(h(),{value:S.values.content,onChange:e=>S.setFieldValue("content",e),theme:"snow",modules:j}),(0,x.jsx)("div",{id:"character-count"}),(0,x.jsx)(l.A,{variant:"secondary",onClick:S.handleSubmit,children:"Submit"})]})]})]}):(0,x.jsx)("p",{children:"You are not logged in."})}},1393:(e,t,r)=>{var o=r(4175),i=r.n(o);class a{constructor(e,t){this.quill=e,this.options=t,this.container=document.querySelector(t.container),e.on("text-change",this.update.bind(this)),this.update()}calculate(){return this.quill.getText().length-1}update(){let e=this.calculate();if(e>this.options.maxChars){let e=this.quill.getText().substring(0,this.options.maxChars);this.quill.setText(e)}this.container.innerText=e+" / "+this.options.maxChars}}i().register("modules/characterCounter",a)},583:()=>{}}]);
//# sourceMappingURL=702.4e10f381.chunk.js.map