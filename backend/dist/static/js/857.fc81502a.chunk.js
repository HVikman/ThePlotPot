"use strict";(self.webpackChunktheplotpot_frontend=self.webpackChunktheplotpot_frontend||[]).push([[857],{7309:(e,t,n)=>{n.d(t,{A:()=>c});n(5043);var s=n(3519),r=n(1719),a=n(4282),l=n(579);const c=e=>{let{message:t,onRetry:n}=e;return(0,l.jsx)(s.A,{className:"mt-5",children:(0,l.jsxs)(r.A,{variant:"danger",children:[(0,l.jsx)(r.A.Heading,{children:"Oh snap! An error occurred."}),(0,l.jsx)("p",{children:t||"Something went wrong. Please try again later."}),n&&(0,l.jsx)(a.A,{variant:"primary",onClick:n,children:"Retry"})]})})}},5857:(e,t,n)=>{n.r(t),n.d(t,{default:()=>P});var s=n(8250),r=n(1456),a=n(5043);const l=function(e,t){const n=(0,a.useRef)(!0);(0,a.useEffect)((()=>{if(!n.current)return e();n.current=!1}),t)};var c=n(8232),i=n(3240),o=n(6161),d=n(8139),u=n.n(d),h=n(7121),x=n(7852),m=n(579);const f=a.forwardRef(((e,t)=>{let{className:n,bsPrefix:s,as:r="div",...a}=e;return s=(0,x.oU)(s,"carousel-caption"),(0,m.jsx)(r,{ref:t,className:u()(n,s),...a})}));f.displayName="CarouselCaption";const v=f,j=a.forwardRef(((e,t)=>{let{as:n="div",bsPrefix:s,className:r,...a}=e;const l=u()(r,(0,x.oU)(s,"carousel-item"));return(0,m.jsx)(n,{ref:t,...a,className:l})}));j.displayName="CarouselItem";const p=j;var N=n(2663),y=n(3492),A=n(2643),g=n(865);const b=a.forwardRef(((e,t)=>{let{defaultActiveIndex:n=0,...s}=e;const{as:d="div",bsPrefix:f,slide:v=!0,fade:j=!1,controls:p=!0,indicators:b=!0,indicatorLabels:C=[],activeIndex:w,onSelect:k,onSlide:S,onSlid:R,interval:T=5e3,keyboard:E=!0,onKeyDown:I,pause:D="hover",onMouseOver:M,onMouseOut:P,wrap:L=!0,touch:O=!0,onTouchStart:U,onTouchMove:H,onTouchEnd:_,prevIcon:B=(0,m.jsx)("span",{"aria-hidden":"true",className:"carousel-control-prev-icon"}),prevLabel:V="Previous",nextIcon:F=(0,m.jsx)("span",{"aria-hidden":"true",className:"carousel-control-next-icon"}),nextLabel:G="Next",variant:J,className:K,children:W,...X}=(0,h.Zw)({defaultActiveIndex:n,...s},{activeIndex:"onSelect"}),Z=(0,x.oU)(f,"carousel"),z=(0,x.Wz)(),q=(0,a.useRef)(null),[Q,Y]=(0,a.useState)("next"),[$,ee]=(0,a.useState)(!1),[te,ne]=(0,a.useState)(!1),[se,re]=(0,a.useState)(w||0);(0,a.useEffect)((()=>{te||w===se||(q.current?Y(q.current):Y((w||0)>se?"next":"prev"),v&&ne(!0),re(w||0))}),[w,te,se,v]),(0,a.useEffect)((()=>{q.current&&(q.current=null)}));let ae,le=0;(0,N.jJ)(W,((e,t)=>{++le,t===w&&(ae=e.props.interval)}));const ce=(0,c.A)(ae),ie=(0,a.useCallback)((e=>{if(te)return;let t=se-1;if(t<0){if(!L)return;t=le-1}q.current="prev",null==k||k(t,e)}),[te,se,k,L,le]),oe=(0,r.A)((e=>{if(te)return;let t=se+1;if(t>=le){if(!L)return;t=0}q.current="next",null==k||k(t,e)})),de=(0,a.useRef)();(0,a.useImperativeHandle)(t,(()=>({element:de.current,prev:ie,next:oe})));const ue=(0,r.A)((()=>{!document.hidden&&function(e){if(!e||!e.style||!e.parentNode||!e.parentNode.style)return!1;const t=getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility&&"none"!==getComputedStyle(e.parentNode).display}(de.current)&&(z?ie():oe())})),he="next"===Q?"start":"end";l((()=>{v||(null==S||S(se,he),null==R||R(se,he))}),[se]);const xe="".concat(Z,"-item-").concat(Q),me="".concat(Z,"-item-").concat(he),fe=(0,a.useCallback)((e=>{(0,A.A)(e),null==S||S(se,he)}),[S,se,he]),ve=(0,a.useCallback)((()=>{ne(!1),null==R||R(se,he)}),[R,se,he]),je=(0,a.useCallback)((e=>{if(E&&!/input|textarea/i.test(e.target.tagName))switch(e.key){case"ArrowLeft":return e.preventDefault(),void(z?oe(e):ie(e));case"ArrowRight":return e.preventDefault(),void(z?ie(e):oe(e))}null==I||I(e)}),[E,I,ie,oe,z]),pe=(0,a.useCallback)((e=>{"hover"===D&&ee(!0),null==M||M(e)}),[D,M]),Ne=(0,a.useCallback)((e=>{ee(!1),null==P||P(e)}),[P]),ye=(0,a.useRef)(0),Ae=(0,a.useRef)(0),ge=(0,i.A)(),be=(0,a.useCallback)((e=>{ye.current=e.touches[0].clientX,Ae.current=0,"hover"===D&&ee(!0),null==U||U(e)}),[D,U]),Ce=(0,a.useCallback)((e=>{e.touches&&e.touches.length>1?Ae.current=0:Ae.current=e.touches[0].clientX-ye.current,null==H||H(e)}),[H]),we=(0,a.useCallback)((e=>{if(O){const t=Ae.current;Math.abs(t)>40&&(t>0?ie(e):oe(e))}"hover"===D&&ge.set((()=>{ee(!1)}),T||void 0),null==_||_(e)}),[O,D,ie,oe,ge,T,_]),ke=null!=T&&!$&&!te,Se=(0,a.useRef)();(0,a.useEffect)((()=>{var e,t;if(!ke)return;const n=z?ie:oe;return Se.current=window.setInterval(document.visibilityState?ue:n,null!=(e=null!=(t=ce.current)?t:T)?e:void 0),()=>{null!==Se.current&&clearInterval(Se.current)}}),[ke,ie,oe,ce,T,ue,z]);const Re=(0,a.useMemo)((()=>b&&Array.from({length:le},((e,t)=>e=>{null==k||k(t,e)}))),[b,le,k]);return(0,m.jsxs)(d,{ref:de,...X,onKeyDown:je,onMouseOver:pe,onMouseOut:Ne,onTouchStart:be,onTouchMove:Ce,onTouchEnd:we,className:u()(K,Z,v&&"slide",j&&"".concat(Z,"-fade"),J&&"".concat(Z,"-").concat(J)),children:[b&&(0,m.jsx)("div",{className:"".concat(Z,"-indicators"),children:(0,N.Tj)(W,((e,t)=>(0,m.jsx)("button",{type:"button","data-bs-target":"","aria-label":null!=C&&C.length?C[t]:"Slide ".concat(t+1),className:t===se?"active":void 0,onClick:Re?Re[t]:void 0,"aria-current":t===se},t)))}),(0,m.jsx)("div",{className:"".concat(Z,"-inner"),children:(0,N.Tj)(W,((e,t)=>{const n=t===se;return v?(0,m.jsx)(g.A,{in:n,onEnter:n?fe:void 0,onEntered:n?ve:void 0,addEndListener:y.A,children:(t,s)=>a.cloneElement(e,{...s,className:u()(e.props.className,n&&"entered"!==t&&xe,("entered"===t||"exiting"===t)&&"active",("entering"===t||"exiting"===t)&&me)})}):a.cloneElement(e,{className:u()(e.props.className,n&&"active")})}))}),p&&(0,m.jsxs)(m.Fragment,{children:[(L||0!==w)&&(0,m.jsxs)(o.A,{className:"".concat(Z,"-control-prev"),onClick:ie,children:[B,V&&(0,m.jsx)("span",{className:"visually-hidden",children:V})]}),(L||w!==le-1)&&(0,m.jsxs)(o.A,{className:"".concat(Z,"-control-next"),onClick:oe,children:[F,G&&(0,m.jsx)("span",{className:"visually-hidden",children:G})]})]})]})}));b.displayName="Carousel";const C=Object.assign(b,{Caption:v,Item:p});var w=n(8628),k=n(4282);const S=a.forwardRef(((e,t)=>{let{className:n,bsPrefix:s,as:r="div",...a}=e;return s=(0,x.oU)(s,"card-group"),(0,m.jsx)(r,{ref:t,className:u()(n,s),...a})}));S.displayName="CardGroup";const R=S;var T=n(4743),E=n(5475),I=n(7309),D=(n(4838),n(6133));const M=()=>(0,m.jsx)("div",{style:{backgroundColor:"#e0e0e0",height:"100%",width:"100%"}}),P=()=>{const{isDarkMode:e}=(0,D.D2)(),{loading:t,error:n,data:r}=(0,s.I)(T.F4);if(n)return(0,m.jsx)(I.A,{message:n.message});let a=[];if(r){a=[...r.getAllStories].sort(((e,t)=>t.id-e.id)).slice(0,9)}return(0,m.jsxs)("div",{className:"home-container",children:[(0,m.jsxs)("section",{className:"carousel-section",children:[(0,m.jsx)("h2",{className:"carousel-heading",children:"Featured Stories"}),(0,m.jsx)(C,{className:"carousel",controls:!0,indicators:!0,keyboard:!0,slide:!1,"data-bs-theme":"dark",children:t?Array(5).fill(null).map(((e,t)=>(0,m.jsx)(C.Item,{children:(0,m.jsx)(M,{})},t))):r.getAllStories.slice(0,5).map(((e,t)=>(0,m.jsx)(C.Item,{children:(0,m.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"400px",width:"100%"},children:(0,m.jsxs)(w.A,{className:"shadow",style:{textAlign:"center",width:"80%",minHeight:"70%"},children:[0===t&&(0,m.jsx)("span",{className:"badge badge-secondary badge-corner",children:"Top Story"}),(0,m.jsxs)(w.A.Body,{children:[(0,m.jsx)(w.A.Title,{className:"truncate-text",children:e.title}),(0,m.jsx)(w.A.Text,{className:"truncate-text",children:e.description}),(0,m.jsxs)(w.A.Text,{children:["Genre: ",e.genre]}),(0,m.jsx)(w.A.Text,{children:(0,m.jsxs)("small",{className:"text-muted",children:["By:",(0,m.jsx)(E.N_,{style:{color:"inherit",textDecoration:"inherit"},to:"/user/".concat(e.author.id),children:e.author.username})," "]})}),(0,m.jsx)(E.N_,{to:"/story/".concat(e.id),children:(0,m.jsx)(k.A,{variant:"secondary",children:"Read Story"})})]})]})})},e.id)))})]}),(0,m.jsxs)("section",{className:"stories-grid",children:[(0,m.jsx)("h2",{className:"carousel-heading",children:"Recent Stories"}),(0,m.jsx)("div",{className:"card-grid-container",children:(0,m.jsx)(R,{children:t?Array(9).fill(null).map(((e,t)=>(0,m.jsx)(w.A,{className:"shadow",style:{margin:"15px"},children:(0,m.jsx)(M,{})},t))):a.map((t=>(0,m.jsx)(w.A,{className:"shadow ".concat(e?"dark-mode":"light-mode"),style:{margin:"15px",maxWidth:"600px"},children:(0,m.jsxs)(w.A.Body,{children:[(0,m.jsx)(w.A.Title,{children:t.title}),(0,m.jsx)(w.A.Text,{children:t.description}),(0,m.jsxs)(w.A.Text,{children:["Genre: ",t.genre]}),(0,m.jsx)(w.A.Text,{children:(0,m.jsxs)("small",{className:"text-muted",children:["By: ",(0,m.jsx)(E.N_,{style:{color:"inherit",textDecoration:"inherit"},to:"/user/".concat(t.author.id),children:t.author.username})]})}),(0,m.jsx)(E.N_,{to:"/story/".concat(t.id),children:(0,m.jsx)(k.A,{variant:"secondary",children:"Read Story"})})]})},t.id)))})})]})]})}},1719:(e,t,n)=>{n.d(t,{A:()=>y});var s=n(8139),r=n.n(s),a=n(5043),l=n(7121),c=n(1456),i=n(7852),o=n(4488),d=n(579);const u=(0,o.A)("h4");u.displayName="DivStyledAsH4";const h=a.forwardRef(((e,t)=>{let{className:n,bsPrefix:s,as:a=u,...l}=e;return s=(0,i.oU)(s,"alert-heading"),(0,d.jsx)(a,{ref:t,className:r()(n,s),...l})}));h.displayName="AlertHeading";const x=h;var m=n(6161);const f=a.forwardRef(((e,t)=>{let{className:n,bsPrefix:s,as:a=m.A,...l}=e;return s=(0,i.oU)(s,"alert-link"),(0,d.jsx)(a,{ref:t,className:r()(n,s),...l})}));f.displayName="AlertLink";const v=f;var j=n(8072),p=n(5632);const N=a.forwardRef(((e,t)=>{const{bsPrefix:n,show:s=!0,closeLabel:a="Close alert",closeVariant:o,className:u,children:h,variant:x="primary",onClose:m,dismissible:f,transition:v=j.A,...N}=(0,l.Zw)(e,{show:"onClose"}),y=(0,i.oU)(n,"alert"),A=(0,c.A)((e=>{m&&m(!1,e)})),g=!0===v?j.A:v,b=(0,d.jsxs)("div",{role:"alert",...g?void 0:N,ref:t,className:r()(u,y,x&&"".concat(y,"-").concat(x),f&&"".concat(y,"-dismissible")),children:[f&&(0,d.jsx)(p.A,{onClick:A,"aria-label":a,variant:o}),h]});return g?(0,d.jsx)(g,{unmountOnExit:!0,...N,ref:void 0,in:s,children:b}):s?b:null}));N.displayName="Alert";const y=Object.assign(N,{Link:v,Heading:x})},2663:(e,t,n)=>{n.d(t,{Tj:()=>r,jJ:()=>a,mf:()=>l});var s=n(5043);function r(e,t){let n=0;return s.Children.map(e,(e=>s.isValidElement(e)?t(e,n++):e))}function a(e,t){let n=0;s.Children.forEach(e,(e=>{s.isValidElement(e)&&t(e,n++)}))}function l(e,t){return s.Children.toArray(e).some((e=>s.isValidElement(e)&&e.type===t))}},4838:()=>{}}]);
//# sourceMappingURL=857.fc81502a.chunk.js.map