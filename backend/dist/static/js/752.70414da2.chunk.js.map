{"version":3,"file":"static/js/752.70414da2.chunk.js","mappings":"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","sources":["../node_modules/react-bootstrap/esm/Table.js","pages/admin/UserList.jsx"],"sourcesContent":["\"use client\";\n\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst Table = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  className,\n  striped,\n  bordered,\n  borderless,\n  hover,\n  size,\n  variant,\n  responsive,\n  ...props\n}, ref) => {\n  const decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'table');\n  const classes = classNames(className, decoratedBsPrefix, variant && `${decoratedBsPrefix}-${variant}`, size && `${decoratedBsPrefix}-${size}`, striped && `${decoratedBsPrefix}-${typeof striped === 'string' ? `striped-${striped}` : 'striped'}`, bordered && `${decoratedBsPrefix}-bordered`, borderless && `${decoratedBsPrefix}-borderless`, hover && `${decoratedBsPrefix}-hover`);\n  const table = /*#__PURE__*/_jsx(\"table\", {\n    ...props,\n    className: classes,\n    ref: ref\n  });\n  if (responsive) {\n    let responsiveClass = `${decoratedBsPrefix}-responsive`;\n    if (typeof responsive === 'string') {\n      responsiveClass = `${responsiveClass}-${responsive}`;\n    }\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: responsiveClass,\n      children: table\n    });\n  }\n  return table;\n});\nexport default Table;","import React from 'react'\r\nimport { useQuery, useMutation } from '@apollo/client'\r\nimport { Table, Button } from 'react-bootstrap'\r\nimport { Popconfirm } from 'antd'\r\nimport { GET_ALL_USERS, BAN_USER, UNBAN_USER, DELETE_USER } from '../../api/queries'\r\nimport { Link } from 'react-router-dom'\r\n\r\n\r\nconst UserList = () => {\r\n  const { loading, error, data } = useQuery(GET_ALL_USERS)\r\n  const [banUser] = useMutation(BAN_USER, {\r\n    refetchQueries: [\r\n      { query: GET_ALL_USERS },\r\n    ],\r\n  })\r\n  const [unbanUser] = useMutation(UNBAN_USER, {\r\n    refetchQueries: [\r\n      { query: GET_ALL_USERS },\r\n    ],\r\n  })\r\n  const [deleteUser] = useMutation(DELETE_USER, {\r\n    refetchQueries: [\r\n      { query: GET_ALL_USERS },\r\n    ],\r\n  })\r\n\r\n  if (loading) return <p>Loading...</p>\r\n  if (error) return <p>Error: {error.message}</p>\r\n\r\n  const handleUnban = async (userId) => {\r\n    try {\r\n      const response = await unbanUser({ variables: { id: userId } })\r\n      if (response.data.unbanUser.success) {\r\n        console.log(response.data)\r\n      } else {\r\n        console.log(response.data)\r\n      }\r\n    } catch (err) {\r\n      console.log(err)\r\n    }\r\n  }\r\n  const handleBan = async (userId) => {\r\n    try {\r\n      const response = await banUser({ variables: { id: userId } })\r\n      if (response.data.banUser.success) {\r\n        console.log(response.data)\r\n      } else {\r\n        console.log(response.data)\r\n      }\r\n    } catch (err) {\r\n      console.log(err)\r\n    }\r\n  }\r\n\r\n  const handleActivate = async (userId) => {\r\n  //manual user activation\r\n  }\r\n\r\n\r\n  //TODO: handle user deletion\r\n  const handleDelete = async (userId) => {\r\n    if (window.confirm('Are you absolutely sure you want to delete this user? This action cannot be undone.')) {\r\n      try {\r\n        const response = await deleteUser({ variables: { id: userId } })\r\n        if (response.data.deleteUser.success) {\r\n          console.log('User deleted successfully')\r\n        } else {\r\n          console.log('Failed to delete user')\r\n        }\r\n      } catch (err) {\r\n        console.log(err)\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Table striped bordered hover>\r\n      <thead>\r\n        <tr>\r\n          <th>User id</th>\r\n          <th>Username</th>\r\n          <th>Email</th>\r\n          <th>Admin</th>\r\n          <th>Coffee</th>\r\n          <th>Banned at</th>\r\n          <th>Actions</th>\r\n\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {data.getAllUsers.map((user) => (\r\n          <tr key={user.id}>\r\n            <td>{user.id}</td>\r\n            <td><Link style={{ color: 'inherit', textDecoration: 'inherit' }} to={`/user/${user.id}`}>{user.username}</Link></td>\r\n            <td>{user.email}</td>\r\n            <td>{user.has_superpowers ? 'Yes' : 'No'}</td>\r\n            <td>{user.coffee ? <a href={user.coffee} target=\"_blank\" rel=\"noopener noreferrer\">Coffee Link</a> : 'None'}</td>\r\n            <td>{user.bannedAt && new Date(Number(user.bannedAt)).toLocaleString()}</td>\r\n            <td>\r\n              {!user.has_superpowers && (\r\n                <Popconfirm\r\n                  title=\"Are you sure you want to activate this user?\"\r\n                  onConfirm={() => handleActivate(user.id)}\r\n                  okText=\"Yes\"\r\n                  cancelText=\"No\"\r\n                >\r\n                  <Button variant=\"success\" size=\"sm\" className=\"me-2\">\r\n                    Activate\r\n                  </Button>\r\n                </Popconfirm>\r\n              )}\r\n              {!user.has_superpowers && (!user.bannedAt ? (\r\n                <Popconfirm\r\n                  title=\"Are you sure you want to ban this user?\"\r\n                  onConfirm={() => handleBan(user.id)}\r\n                  okText=\"Yes\"\r\n                  cancelText=\"No\"\r\n                >\r\n                  <Button variant=\"danger\" size=\"sm\" className='mx-1'>\r\n                    Ban\r\n                  </Button>\r\n                </Popconfirm>\r\n              ): (\r\n                <Popconfirm\r\n                  title=\"Are you sure you want to unban this user?\"\r\n                  onConfirm={() => handleUnban(user.id)}\r\n                  okText=\"Yes\"\r\n                  cancelText=\"No\"\r\n                >\r\n                  <Button variant=\"warning\" size=\"sm\" className='mx-1'>\r\n                    Unban\r\n                  </Button>\r\n                </Popconfirm>\r\n              ))}\r\n              <Popconfirm\r\n                title=\"Are you sure you want to delete this user?\"\r\n                onConfirm={() => handleDelete(user.id)}\r\n                okText=\"Yes\"\r\n                cancelText=\"No\"\r\n              >\r\n                <Button variant=\"outline-danger\" size=\"sm\" className='mx-2'>\r\n                  Delete\r\n                </Button>\r\n              </Popconfirm>\r\n            </td>\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </Table>\r\n  )\r\n}\r\n\r\nexport default UserList"],"names":["React","_ref","ref","bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive","props","decoratedBsPrefix","useBootstrapPrefix","classes","classNames","concat","table","_jsx","responsiveClass","children","UserList","loading","error","data","useQuery","GET_ALL_USERS","banUser","useMutation","BAN_USER","refetchQueries","query","unbanUser","UNBAN_USER","deleteUser","DELETE_USER","_jsxs","message","Table","getAllUsers","map","user","id","Link","style","color","textDecoration","to","username","email","has_superpowers","coffee","href","target","rel","bannedAt","Date","Number","toLocaleString","Popconfirm","title","onConfirm","async","handleActivate","okText","cancelText","Button","response","variables","userId","success","console","log","err","handleUnban","handleBan","window","confirm","handleDelete"],"sourceRoot":""}