"use strict";(self.webpackChunktheplotpot_frontend=self.webpackChunktheplotpot_frontend||[]).push([[622],{3622:function(e,a,r){r.r(a);var n=r(4165),s=r(5861),o=r(9439),l=r(2791),t=r(5705),i=r(8007),d=r(4376),c=r(9829),u=r(7689),m=r(3812),h=r(7022),p=r(9795),f=r(3360),v=r(2469),Z=r(8261),w=r(184),x=i.Ry().shape({email:i.Z_().email("Invalid email").required("Email is required"),password:i.Z_().required("Password is required")});a.default=function(){var e=(0,Z.z)().addNotification,a=(0,l.useState)(null),r=(0,o.Z)(a,2),i=r[0],g=r[1],y=(0,m.a)(),b=y.user,j=y.setUser,C=!!b,k=(0,u.s0)(),B=(0,d.D)(c.O2,{update:function(a,r){var n=r.data;n.login.success?(j(n.login.user),e("Welcome back ".concat(n.login.user.username)),k("/")):g("Wrong username/password.")},onError:function(a){e("Something went wrong: ".concat(a),2e3,"error")}}),S=(0,o.Z)(B,1)[0],E=(0,t.TA)({initialValues:{email:"",password:"",honeypot:""},validationSchema:x,onSubmit:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(a){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.honeypot){e.next=3;break}return console.log("Bot detected"),e.abrupt("return");case 3:S({variables:a});case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()});return C?(k("/"),(0,w.jsx)("p",{children:"You are already logged in."})):(0,w.jsxs)(h.Z,{style:{maxWidth:"400px",marginTop:"50px"},children:[(0,w.jsxs)(p.Z,{onSubmit:E.handleSubmit,children:[(0,w.jsxs)(p.Z.Group,{controlId:"formBasicEmail",className:"mt-2 custom-form",children:[(0,w.jsx)(p.Z.Label,{children:"Email address"}),(0,w.jsx)(p.Z.Control,{type:"email",name:"email",value:E.values.email,onChange:E.handleChange,onBlur:E.handleBlur,isInvalid:E.touched.email&&E.errors.email,placeholder:"Enter email"}),(0,w.jsx)(p.Z.Control.Feedback,{type:"invalid",children:E.errors.email})]}),(0,w.jsxs)(p.Z.Group,{controlId:"formBasicPassword",className:"mt-4 custom-form",children:[(0,w.jsx)(p.Z.Label,{children:"Password"}),(0,w.jsx)(p.Z.Control,{type:"password",name:"password",value:E.values.password,onChange:E.handleChange,onBlur:E.handleBlur,isInvalid:E.touched.password&&E.errors.password,placeholder:"Password"}),(0,w.jsx)(p.Z.Control.Feedback,{type:"invalid",children:E.errors.password})]}),(0,w.jsx)(p.Z.Control,{style:{display:"none"},name:"honeypot",onChange:E.handleChange,value:E.values.honeypot}),(0,w.jsx)(f.Z,{variant:"secondary",className:"mt-2",type:"submit",children:"Login"})]}),i&&(0,w.jsx)(v.Z,{variant:"danger",className:"mt-3",children:i})]})}}}]);
//# sourceMappingURL=622.03f151cd.chunk.js.map