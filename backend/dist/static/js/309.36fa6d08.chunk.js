"use strict";(self.webpackChunktheplotpot_frontend=self.webpackChunktheplotpot_frontend||[]).push([[309],{2309:function(e,t,r){r.r(t),r.d(t,{default:function(){return A}});var i=r(9439),n=r(2791),o=r(5705),a=r(8007),l=r(6714),s=r(2298),c=r(5474),u=r(1610),d=r(3360),h=["Action and Adventure","Adventure","Alternate History","Anthology","Art","Autobiography","Biography","Childrens","Classic","Comic/Graphic Novel","Contemporary","Crime","Drama","Dystopian","Epic","Erotic Fiction","Fable","Fairy Tale","Fantasy","Gothic Fiction","Historical Fiction","Horror","Humor","Inspirational","Journal","LGBT","Literary Fiction","Military/War Fiction","Mystery","Mythology","Noir","Paranormal Romance","Philosophical","Poetry","Political","Post-Apocalyptic","Psychological Thriller","Religious","Romance","Satire","Science Fiction","Self-help","Short Story","Speculative Fiction","Spiritual","Sports","Suspense/Thriller","Travel","True Crime","Western","Young Adult (YA)"],p=r(6770),y=r.n(p),g=(r(215),r(1684),r(8281),r(3812)),v=r(8261),m=r(3433),f=r(4376),x=r(9829),C=r(7689),b=r(184),S=a.Ry({title:a.Z_().required("Required").max(100,"Must be 100 characters or less"),description:a.Z_().required("Required").max(500,"Must be 450 characters or less"),content:a.Z_().required("Required"),genre:a.Z_().required("Required")}),Z={title:"",description:"",content:"",genre:"",honeypot:""},q={characterCounter:{container:"#character-count",maxChars:12e3},toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","blockquote"],[{list:"ordered"},{list:"bullet"}]]},A=function(){var e=(0,v.z)().addNotification,t=!!(0,g.a)().user,r=(0,n.useState)("disabled"),a=(0,i.Z)(r,2),p=a[0],A=a[1],T=function(e){var t=(0,C.s0)(),r=(0,f.D)(x.pk,{update:function(r,i){var n=i.data.createStory;n.success?(e("".concat(n.story.title," created successfully!"),2e3,"success"),console.log("New Story ID:",n.story.id),t("/story/".concat(n.story.id))):(console.log("Failed to create story:",n.message),e("Story creation failed: ".concat(n.message),2e3,"error"));var o=r.readQuery({query:x.Dz}).getAllStories,a=[].concat((0,m.Z)(o),[n.story]);r.writeQuery({query:x.Dz,data:{getAllStories:a}})}});return(0,i.Z)(r,1)[0]}(e),j=(0,o.TA)({initialValues:Z,validationSchema:S,onSubmit:function(t){t.honeypot?console.log("Bot detected"):T({variables:{title:t.title,description:t.description,genre:t.genre,firstChapterContent:t.content}}).catch((function(t){console.error("There was an error creating the chapter:",t),e(t.message,3e3,"error")}))}});if((0,n.useEffect)((function(){j.values.title&&j.values.description&&j.values.genre?A(""):A("disabled")}),[j.values.title,j.values.description,j.values.genre]),!t)return(0,b.jsx)("p",{children:"You are not logged in."});var F=[{key:"1",label:"Step 1: Basic Details",children:(0,b.jsxs)(l.Z,{layout:"vertical",onSubmit:j.handleSubmit,className:"mx-2",children:[(0,b.jsx)(l.Z.Item,{label:"Title",help:j.touched.title&&j.errors.title,children:(0,b.jsx)(s.Z,{type:"text",name:"title",placeholder:"Give your story a cool title",onChange:j.handleChange,onBlur:j.handleBlur,value:j.values.title})}),(0,b.jsx)(l.Z.Item,{label:"Description",help:j.touched.description&&j.errors.description,children:(0,b.jsx)(s.Z.TextArea,{name:"description",placeholder:"Captivating description goes here!",onChange:j.handleChange,onBlur:j.handleBlur,value:j.values.description,rows:4})}),(0,b.jsx)(l.Z.Item,{label:"Genre",help:j.touched.genre&&j.errors.genre,children:(0,b.jsx)(c.Z,{value:j.values.genre,onChange:function(e){return j.setFieldValue("genre",e)},style:{width:"100%"},options:h.map((function(e){return{value:e}})),placeholder:"Select a genre",filterOption:function(e,t){return t.value.toUpperCase().includes(e.toUpperCase())}})})]})},{key:"2",collapsible:p,label:"Step 2: Story Content",children:(0,b.jsxs)("div",{className:"mx-2",children:[(0,b.jsx)(y(),{value:j.values.content,onChange:function(e){return j.setFieldValue("content",e)},theme:"snow",modules:q}),(0,b.jsx)("div",{id:"character-count"}),(0,b.jsx)(d.Z,{variant:"secondary",onClick:function(){return j.handleSubmit()},children:"Submit"})]})}];return(0,b.jsx)(u.Z,{items:F,defaultActiveKey:["1"]})}},1684:function(e,t,r){var i=r(5671),n=r(3144),o=r(6921),a=r.n(o),l=function(){function e(t,r){(0,i.Z)(this,e),this.quill=t,this.options=r,this.container=document.querySelector(r.container),t.on("text-change",this.update.bind(this)),this.update()}return(0,n.Z)(e,[{key:"calculate",value:function(){return this.quill.getText().length}},{key:"update",value:function(){var e=this.calculate();if(e>this.options.maxChars){var t=this.quill.getText().substring(0,this.options.maxChars);this.quill.setText(t)}this.container.innerText=e+" / "+this.options.maxChars}}]),e}();a().register("modules/characterCounter",l)},8281:function(){}}]);
//# sourceMappingURL=309.36fa6d08.chunk.js.map