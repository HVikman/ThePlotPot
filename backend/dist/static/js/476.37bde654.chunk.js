"use strict";(self.webpackChunktheplotpot_frontend=self.webpackChunktheplotpot_frontend||[]).push([[476],{6916:function(e,n,t){t(2791);var r=t(7022),i=t(2469),a=t(3360),o=t(184);n.Z=function(e){var n=e.message,t=e.onRetry;return(0,o.jsx)(r.Z,{className:"mt-5",children:(0,o.jsxs)(i.Z,{variant:"danger",children:[(0,o.jsx)(i.Z.Heading,{children:"Oh snap! An error occurred."}),(0,o.jsx)("p",{children:n||"Something went wrong. Please try again later."}),t&&(0,o.jsx)(a.Z,{variant:"primary",onClick:t,children:"Retry"})]})})}},6476:function(e,n,t){t.r(n),t.d(n,{default:function(){return X}});var r=t(3433),i=t(6578),a=t(9439),o=t(1413),s=t(5987),c=t(9007),l=t(2791);var u=function(e,n){var t=(0,l.useRef)(!0);(0,l.useEffect)((function(){if(!t.current)return e();t.current=!1}),n)},d=t(7904),h=t(5746),v=t(1683),f=Math.pow(2,31)-1;function x(e,n,t){var r=t-Date.now();e.current=r<=f?setTimeout(n,r):setTimeout((function(){return x(e,n,t)}),f)}function m(){var e=(0,h.Z)(),n=(0,l.useRef)();return(0,v.Z)((function(){return clearTimeout(n.current)})),(0,l.useMemo)((function(){var t=function(){return clearTimeout(n.current)};return{set:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e()&&(t(),i<=f?n.current=setTimeout(r,i):x(n,r,Date.now()+i))},clear:t}}),[])}var p=t(6445),Z=t(1694),j=t.n(Z),y=t(239),g=t(6543),b=(0,g.Z)("carousel-caption"),N=t(162),C=t(184),w=["as","bsPrefix","className"],S=l.forwardRef((function(e,n){var t=e.as,r=void 0===t?"div":t,i=e.bsPrefix,a=e.className,c=(0,s.Z)(e,w),l=j()(a,(0,N.vE)(i,"carousel-item"));return(0,C.jsx)(r,(0,o.Z)((0,o.Z)({ref:n},c),{},{className:l}))}));S.displayName="CarouselItem";var k=S,T=t(1701),E=t(1380),I=t(7202),R=t(4083),A=["defaultActiveIndex"],M=["as","bsPrefix","slide","fade","controls","indicators","indicatorLabels","activeIndex","onSelect","onSlide","onSlid","interval","keyboard","onKeyDown","pause","onMouseOver","onMouseOut","wrap","touch","onTouchStart","onTouchMove","onTouchEnd","prevIcon","prevLabel","nextIcon","nextLabel","variant","className","children"];var D=l.forwardRef((function(e,n){var t=e.defaultActiveIndex,r=void 0===t?0:t,i=(0,s.Z)(e,A),h=(0,y.Ch)((0,o.Z)({defaultActiveIndex:r},i),{activeIndex:"onSelect"}),v=h.as,f=void 0===v?"div":v,x=h.bsPrefix,Z=h.slide,g=void 0===Z||Z,b=h.fade,w=void 0!==b&&b,S=h.controls,k=void 0===S||S,D=h.indicators,L=void 0===D||D,O=h.indicatorLabels,P=void 0===O?[]:O,U=h.activeIndex,H=h.onSelect,V=h.onSlide,B=h.onSlid,K=h.interval,X=void 0===K?5e3:K,F=h.keyboard,G=void 0===F||F,W=h.onKeyDown,_=h.pause,z=void 0===_?"hover":_,q=h.onMouseOver,J=h.onMouseOut,Q=h.wrap,Y=void 0===Q||Q,$=h.touch,ee=void 0===$||$,ne=h.onTouchStart,te=h.onTouchMove,re=h.onTouchEnd,ie=h.prevIcon,ae=void 0===ie?(0,C.jsx)("span",{"aria-hidden":"true",className:"carousel-control-prev-icon"}):ie,oe=h.prevLabel,se=void 0===oe?"Previous":oe,ce=h.nextIcon,le=void 0===ce?(0,C.jsx)("span",{"aria-hidden":"true",className:"carousel-control-next-icon"}):ce,ue=h.nextLabel,de=void 0===ue?"Next":ue,he=h.variant,ve=h.className,fe=h.children,xe=(0,s.Z)(h,M),me=(0,N.vE)(x,"carousel"),pe=(0,N.SC)(),Ze=(0,l.useRef)(null),je=(0,l.useState)("next"),ye=(0,a.Z)(je,2),ge=ye[0],be=ye[1],Ne=(0,l.useState)(!1),Ce=(0,a.Z)(Ne,2),we=Ce[0],Se=Ce[1],ke=(0,l.useState)(!1),Te=(0,a.Z)(ke,2),Ee=Te[0],Ie=Te[1],Re=(0,l.useState)(U||0),Ae=(0,a.Z)(Re,2),Me=Ae[0],De=Ae[1];(0,l.useEffect)((function(){Ee||U===Me||(Ze.current?be(Ze.current):be((U||0)>Me?"next":"prev"),g&&Ie(!0),De(U||0))}),[U,Ee,Me,g]),(0,l.useEffect)((function(){Ze.current&&(Ze.current=null)}));var Le,Oe=0;(0,T.Ed)(fe,(function(e,n){++Oe,n===U&&(Le=e.props.interval)}));var Pe=(0,d.Z)(Le),Ue=(0,l.useCallback)((function(e){if(!Ee){var n=Me-1;if(n<0){if(!Y)return;n=Oe-1}Ze.current="prev",null==H||H(n,e)}}),[Ee,Me,H,Y,Oe]),He=(0,c.Z)((function(e){if(!Ee){var n=Me+1;if(n>=Oe){if(!Y)return;n=0}Ze.current="next",null==H||H(n,e)}})),Ve=(0,l.useRef)();(0,l.useImperativeHandle)(n,(function(){return{element:Ve.current,prev:Ue,next:He}}));var Be=(0,c.Z)((function(){!document.hidden&&function(e){if(!e||!e.style||!e.parentNode||!e.parentNode.style)return!1;var n=getComputedStyle(e);return"none"!==n.display&&"hidden"!==n.visibility&&"none"!==getComputedStyle(e.parentNode).display}(Ve.current)&&(pe?Ue():He())})),Ke="next"===ge?"start":"end";u((function(){g||(null==V||V(Me,Ke),null==B||B(Me,Ke))}),[Me]);var Xe="".concat(me,"-item-").concat(ge),Fe="".concat(me,"-item-").concat(Ke),Ge=(0,l.useCallback)((function(e){(0,I.Z)(e),null==V||V(Me,Ke)}),[V,Me,Ke]),We=(0,l.useCallback)((function(){Ie(!1),null==B||B(Me,Ke)}),[B,Me,Ke]),_e=(0,l.useCallback)((function(e){if(G&&!/input|textarea/i.test(e.target.tagName))switch(e.key){case"ArrowLeft":return e.preventDefault(),void(pe?He(e):Ue(e));case"ArrowRight":return e.preventDefault(),void(pe?Ue(e):He(e))}null==W||W(e)}),[G,W,Ue,He,pe]),ze=(0,l.useCallback)((function(e){"hover"===z&&Se(!0),null==q||q(e)}),[z,q]),qe=(0,l.useCallback)((function(e){Se(!1),null==J||J(e)}),[J]),Je=(0,l.useRef)(0),Qe=(0,l.useRef)(0),Ye=m(),$e=(0,l.useCallback)((function(e){Je.current=e.touches[0].clientX,Qe.current=0,"hover"===z&&Se(!0),null==ne||ne(e)}),[z,ne]),en=(0,l.useCallback)((function(e){e.touches&&e.touches.length>1?Qe.current=0:Qe.current=e.touches[0].clientX-Je.current,null==te||te(e)}),[te]),nn=(0,l.useCallback)((function(e){if(ee){var n=Qe.current;Math.abs(n)>40&&(n>0?Ue(e):He(e))}"hover"===z&&Ye.set((function(){Se(!1)}),X||void 0),null==re||re(e)}),[ee,z,Ue,He,Ye,X,re]),tn=null!=X&&!we&&!Ee,rn=(0,l.useRef)();(0,l.useEffect)((function(){var e,n;if(tn){var t=pe?Ue:He;return rn.current=window.setInterval(document.visibilityState?Be:t,null!=(e=null!=(n=Pe.current)?n:X)?e:void 0),function(){null!==rn.current&&clearInterval(rn.current)}}}),[tn,Ue,He,Pe,X,Be,pe]);var an=(0,l.useMemo)((function(){return L&&Array.from({length:Oe},(function(e,n){return function(e){null==H||H(n,e)}}))}),[L,Oe,H]);return(0,C.jsxs)(f,(0,o.Z)((0,o.Z)({ref:Ve},xe),{},{onKeyDown:_e,onMouseOver:ze,onMouseOut:qe,onTouchStart:$e,onTouchMove:en,onTouchEnd:nn,className:j()(ve,me,g&&"slide",w&&"".concat(me,"-fade"),he&&"".concat(me,"-").concat(he)),children:[L&&(0,C.jsx)("div",{className:"".concat(me,"-indicators"),children:(0,T.UI)(fe,(function(e,n){return(0,C.jsx)("button",{type:"button","data-bs-target":"","aria-label":null!=P&&P.length?P[n]:"Slide ".concat(n+1),className:n===Me?"active":void 0,onClick:an?an[n]:void 0,"aria-current":n===Me},n)}))}),(0,C.jsx)("div",{className:"".concat(me,"-inner"),children:(0,T.UI)(fe,(function(e,n){var t=n===Me;return g?(0,C.jsx)(R.Z,{in:t,onEnter:t?Ge:void 0,onEntered:t?We:void 0,addEndListener:E.Z,children:function(n,r){return l.cloneElement(e,(0,o.Z)((0,o.Z)({},r),{},{className:j()(e.props.className,t&&"entered"!==n&&Xe,("entered"===n||"exiting"===n)&&"active",("entering"===n||"exiting"===n)&&Fe)}))}}):l.cloneElement(e,{className:j()(e.props.className,t&&"active")})}))}),k&&(0,C.jsxs)(C.Fragment,{children:[(Y||0!==U)&&(0,C.jsxs)(p.Z,{className:"".concat(me,"-control-prev"),onClick:Ue,children:[ae,se&&(0,C.jsx)("span",{className:"visually-hidden",children:se})]}),(Y||U!==Oe-1)&&(0,C.jsxs)(p.Z,{className:"".concat(me,"-control-next"),onClick:He,children:[le,de&&(0,C.jsx)("span",{className:"visually-hidden",children:de})]})]})]}))}));D.displayName="Carousel";var L=Object.assign(D,{Caption:b,Item:k}),O=t(9140),P=t(3360),U=(0,g.Z)("card-group"),H=(t(7632),t(9829)),V=t(1087),B=t(6916),K=function(){return(0,C.jsx)("div",{style:{backgroundColor:"#e0e0e0",height:"100%",width:"100%"}})},X=function(){var e=(0,i.a)(H.Dz),n=e.loading,t=e.error,a=e.data;if(t)return(0,C.jsx)(B.Z,{message:t.message});var o=[];a&&(o=(0,r.Z)(a.getAllStories).sort((function(e,n){return n.id-e.id})).slice(0,9));return(0,C.jsxs)("div",{className:"home-container",children:[(0,C.jsxs)("section",{className:"carousel-section",children:[(0,C.jsx)("h2",{className:"carousel-heading",children:"Featured Stories"}),(0,C.jsx)(L,{className:"carousel",controls:!0,indicators:!0,keyboard:!0,slide:!1,"data-bs-theme":"dark",children:n?Array(5).fill(null).map((function(e,n){return(0,C.jsx)(L.Item,{children:(0,C.jsx)(K,{})},n)})):a.getAllStories.slice(0,5).map((function(e,n){return(0,C.jsx)(L.Item,{children:(0,C.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"400px",width:"100%"},children:(0,C.jsxs)(O.Z,{className:"shadow",style:{textAlign:"center",width:"80%",minHeight:"70%"},children:[0===n&&(0,C.jsx)("span",{className:"badge badge-secondary badge-corner",children:"Top Story"}),(0,C.jsxs)(O.Z.Body,{children:[(0,C.jsx)(O.Z.Title,{children:e.title}),(0,C.jsx)(O.Z.Text,{children:e.description}),(0,C.jsxs)(O.Z.Text,{children:["Genre: ",e.genre]}),(0,C.jsx)(O.Z.Text,{children:(0,C.jsxs)("small",{className:"text-muted",children:["By:",(0,C.jsx)(V.rU,{style:{color:"inherit",textDecoration:"inherit"},to:"/user/".concat(e.author.id),children:e.author.username})," "]})}),(0,C.jsx)(V.rU,{to:"/story/".concat(e.id),children:(0,C.jsx)(P.Z,{variant:"secondary",children:"Read Story"})})]})]})})},e.id)}))})]}),(0,C.jsxs)("section",{className:"stories-grid",children:[(0,C.jsx)("h2",{className:"carousel-heading",children:"Recent Stories"}),(0,C.jsx)("div",{className:"card-grid-container",children:(0,C.jsx)(U,{children:n?Array(9).fill(null).map((function(e,n){return(0,C.jsx)(O.Z,{className:"shadow",style:{margin:"15px"},children:(0,C.jsx)(K,{})},n)})):o.map((function(e){return(0,C.jsx)(O.Z,{className:"shadow",style:{margin:"15px",maxWidth:"600px"},children:(0,C.jsxs)(O.Z.Body,{children:[(0,C.jsx)(O.Z.Title,{children:e.title}),(0,C.jsx)(O.Z.Text,{children:e.description}),(0,C.jsxs)(O.Z.Text,{children:["Genre: ",e.genre]}),(0,C.jsx)(O.Z.Text,{children:(0,C.jsxs)("small",{className:"text-muted",children:["By: ",(0,C.jsx)(V.rU,{style:{color:"inherit",textDecoration:"inherit"},to:"/user/".concat(e.author.id),children:e.author.username})]})}),(0,C.jsx)(V.rU,{to:"/story/".concat(e.id),children:(0,C.jsx)(P.Z,{variant:"secondary",children:"Read Story"})})]})},e.id)}))})})]})]})}},2469:function(e,n,t){var r=t(1413),i=t(5987),a=t(1694),o=t.n(a),s=t(2791),c=t(239),l=t(9007),u=t(6445),d=t(162),h=t(2709),v=t(473),f=t(7472),x=t(6543),m=t(184),p=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],Z=(0,f.Z)("h4");Z.displayName="DivStyledAsH4";var j=(0,x.Z)("alert-heading",{Component:Z}),y=(0,x.Z)("alert-link",{Component:u.Z}),g=s.forwardRef((function(e,n){var t=(0,c.Ch)(e,{show:"onClose"}),a=t.bsPrefix,s=t.show,u=void 0===s||s,f=t.closeLabel,x=void 0===f?"Close alert":f,Z=t.closeVariant,j=t.className,y=t.children,g=t.variant,b=void 0===g?"primary":g,N=t.onClose,C=t.dismissible,w=t.transition,S=void 0===w?h.Z:w,k=(0,i.Z)(t,p),T=(0,d.vE)(a,"alert"),E=(0,l.Z)((function(e){N&&N(!1,e)})),I=!0===S?h.Z:S,R=(0,m.jsxs)("div",(0,r.Z)((0,r.Z)({role:"alert"},I?void 0:k),{},{ref:n,className:o()(j,T,b&&"".concat(T,"-").concat(b),C&&"".concat(T,"-dismissible")),children:[C&&(0,m.jsx)(v.Z,{onClick:E,"aria-label":x,variant:Z}),y]}));return I?(0,m.jsx)(I,(0,r.Z)((0,r.Z)({unmountOnExit:!0},k),{},{ref:void 0,in:u,children:R})):u?R:null}));g.displayName="Alert",n.Z=Object.assign(g,{Link:y,Heading:j})},1701:function(e,n,t){t.d(n,{Ed:function(){return a},UI:function(){return i},XW:function(){return o}});var r=t(2791);function i(e,n){var t=0;return r.Children.map(e,(function(e){return r.isValidElement(e)?n(e,t++):e}))}function a(e,n){var t=0;r.Children.forEach(e,(function(e){r.isValidElement(e)&&n(e,t++)}))}function o(e,n){return r.Children.toArray(e).some((function(e){return r.isValidElement(e)&&e.type===n}))}}}]);
//# sourceMappingURL=476.37bde654.chunk.js.map