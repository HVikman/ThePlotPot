"use strict";(self.webpackChunktheplotpot_frontend=self.webpackChunktheplotpot_frontend||[]).push([[857],{7309:(e,n,t)=>{t.d(n,{A:()=>c});t(5043);var r=t(3519),s=t(1719),a=t(4282),l=t(579);const c=e=>{let{message:n,onRetry:t}=e;return(0,l.jsx)(r.A,{className:"mt-5",children:(0,l.jsxs)(s.A,{variant:"danger",children:[(0,l.jsx)(s.A.Heading,{children:"Oh snap! An error occurred."}),(0,l.jsx)("p",{children:n||"Something went wrong. Please try again later."}),t&&(0,l.jsx)(a.A,{variant:"primary",onClick:t,children:"Retry"})]})})}},5857:(e,n,t)=>{t.r(n),t.d(n,{default:()=>P});var r=t(8250),s=t(1456),a=t(5043);const l=function(e,n){const t=(0,a.useRef)(!0);(0,a.useEffect)((()=>{if(!t.current)return e();t.current=!1}),n)};var c=t(8232),i=t(3240),o=t(6161),d=t(8139),u=t.n(d),h=t(7121),x=t(7852),m=t(579);const f=a.forwardRef(((e,n)=>{let{className:t,bsPrefix:r,as:s="div",...a}=e;return r=(0,x.oU)(r,"carousel-caption"),(0,m.jsx)(s,{ref:n,className:u()(t,r),...a})}));f.displayName="CarouselCaption";const v=f,j=a.forwardRef(((e,n)=>{let{as:t="div",bsPrefix:r,className:s,...a}=e;const l=u()(s,(0,x.oU)(r,"carousel-item"));return(0,m.jsx)(t,{ref:n,...a,className:l})}));j.displayName="CarouselItem";const p=j;var N=t(2663),y=t(3492),A=t(2643),g=t(865);const b=a.forwardRef(((e,n)=>{let{defaultActiveIndex:t=0,...r}=e;const{as:d="div",bsPrefix:f,slide:v=!0,fade:j=!1,controls:p=!0,indicators:b=!0,indicatorLabels:C=[],activeIndex:w,onSelect:k,onSlide:S,onSlid:R,interval:T=5e3,keyboard:E=!0,onKeyDown:I,pause:D="hover",onMouseOver:M,onMouseOut:P,wrap:L=!0,touch:O=!0,onTouchStart:U,onTouchMove:H,onTouchEnd:_,prevIcon:B=(0,m.jsx)("span",{"aria-hidden":"true",className:"carousel-control-prev-icon"}),prevLabel:V="Previous",nextIcon:F=(0,m.jsx)("span",{"aria-hidden":"true",className:"carousel-control-next-icon"}),nextLabel:G="Next",variant:J,className:K,children:W,...X}=(0,h.Zw)({defaultActiveIndex:t,...r},{activeIndex:"onSelect"}),Z=(0,x.oU)(f,"carousel"),z=(0,x.Wz)(),q=(0,a.useRef)(null),[Q,Y]=(0,a.useState)("next"),[$,ee]=(0,a.useState)(!1),[ne,te]=(0,a.useState)(!1),[re,se]=(0,a.useState)(w||0);(0,a.useEffect)((()=>{ne||w===re||(q.current?Y(q.current):Y((w||0)>re?"next":"prev"),v&&te(!0),se(w||0))}),[w,ne,re,v]),(0,a.useEffect)((()=>{q.current&&(q.current=null)}));let ae,le=0;(0,N.jJ)(W,((e,n)=>{++le,n===w&&(ae=e.props.interval)}));const ce=(0,c.A)(ae),ie=(0,a.useCallback)((e=>{if(ne)return;let n=re-1;if(n<0){if(!L)return;n=le-1}q.current="prev",null==k||k(n,e)}),[ne,re,k,L,le]),oe=(0,s.A)((e=>{if(ne)return;let n=re+1;if(n>=le){if(!L)return;n=0}q.current="next",null==k||k(n,e)})),de=(0,a.useRef)();(0,a.useImperativeHandle)(n,(()=>({element:de.current,prev:ie,next:oe})));const ue=(0,s.A)((()=>{!document.hidden&&function(e){if(!e||!e.style||!e.parentNode||!e.parentNode.style)return!1;const n=getComputedStyle(e);return"none"!==n.display&&"hidden"!==n.visibility&&"none"!==getComputedStyle(e.parentNode).display}(de.current)&&(z?ie():oe())})),he="next"===Q?"start":"end";l((()=>{v||(null==S||S(re,he),null==R||R(re,he))}),[re]);const xe="".concat(Z,"-item-").concat(Q),me="".concat(Z,"-item-").concat(he),fe=(0,a.useCallback)((e=>{(0,A.A)(e),null==S||S(re,he)}),[S,re,he]),ve=(0,a.useCallback)((()=>{te(!1),null==R||R(re,he)}),[R,re,he]),je=(0,a.useCallback)((e=>{if(E&&!/input|textarea/i.test(e.target.tagName))switch(e.key){case"ArrowLeft":return e.preventDefault(),void(z?oe(e):ie(e));case"ArrowRight":return e.preventDefault(),void(z?ie(e):oe(e))}null==I||I(e)}),[E,I,ie,oe,z]),pe=(0,a.useCallback)((e=>{"hover"===D&&ee(!0),null==M||M(e)}),[D,M]),Ne=(0,a.useCallback)((e=>{ee(!1),null==P||P(e)}),[P]),ye=(0,a.useRef)(0),Ae=(0,a.useRef)(0),ge=(0,i.A)(),be=(0,a.useCallback)((e=>{ye.current=e.touches[0].clientX,Ae.current=0,"hover"===D&&ee(!0),null==U||U(e)}),[D,U]),Ce=(0,a.useCallback)((e=>{e.touches&&e.touches.length>1?Ae.current=0:Ae.current=e.touches[0].clientX-ye.current,null==H||H(e)}),[H]),we=(0,a.useCallback)((e=>{if(O){const n=Ae.current;Math.abs(n)>40&&(n>0?ie(e):oe(e))}"hover"===D&&ge.set((()=>{ee(!1)}),T||void 0),null==_||_(e)}),[O,D,ie,oe,ge,T,_]),ke=null!=T&&!$&&!ne,Se=(0,a.useRef)();(0,a.useEffect)((()=>{var e,n;if(!ke)return;const t=z?ie:oe;return Se.current=window.setInterval(document.visibilityState?ue:t,null!=(e=null!=(n=ce.current)?n:T)?e:void 0),()=>{null!==Se.current&&clearInterval(Se.current)}}),[ke,ie,oe,ce,T,ue,z]);const Re=(0,a.useMemo)((()=>b&&Array.from({length:le},((e,n)=>e=>{null==k||k(n,e)}))),[b,le,k]);return(0,m.jsxs)(d,{ref:de,...X,onKeyDown:je,onMouseOver:pe,onMouseOut:Ne,onTouchStart:be,onTouchMove:Ce,onTouchEnd:we,className:u()(K,Z,v&&"slide",j&&"".concat(Z,"-fade"),J&&"".concat(Z,"-").concat(J)),children:[b&&(0,m.jsx)("div",{className:"".concat(Z,"-indicators"),children:(0,N.Tj)(W,((e,n)=>(0,m.jsx)("button",{type:"button","data-bs-target":"","aria-label":null!=C&&C.length?C[n]:"Slide ".concat(n+1),className:n===re?"active":void 0,onClick:Re?Re[n]:void 0,"aria-current":n===re},n)))}),(0,m.jsx)("div",{className:"".concat(Z,"-inner"),children:(0,N.Tj)(W,((e,n)=>{const t=n===re;return v?(0,m.jsx)(g.A,{in:t,onEnter:t?fe:void 0,onEntered:t?ve:void 0,addEndListener:y.A,children:(n,r)=>a.cloneElement(e,{...r,className:u()(e.props.className,t&&"entered"!==n&&xe,("entered"===n||"exiting"===n)&&"active",("entering"===n||"exiting"===n)&&me)})}):a.cloneElement(e,{className:u()(e.props.className,t&&"active")})}))}),p&&(0,m.jsxs)(m.Fragment,{children:[(L||0!==w)&&(0,m.jsxs)(o.A,{className:"".concat(Z,"-control-prev"),onClick:ie,children:[B,V&&(0,m.jsx)("span",{className:"visually-hidden",children:V})]}),(L||w!==le-1)&&(0,m.jsxs)(o.A,{className:"".concat(Z,"-control-next"),onClick:oe,children:[F,G&&(0,m.jsx)("span",{className:"visually-hidden",children:G})]})]})]})}));b.displayName="Carousel";const C=Object.assign(b,{Caption:v,Item:p});var w=t(8628),k=t(4282);const S=a.forwardRef(((e,n)=>{let{className:t,bsPrefix:r,as:s="div",...a}=e;return r=(0,x.oU)(r,"card-group"),(0,m.jsx)(s,{ref:n,className:u()(t,r),...a})}));S.displayName="CardGroup";const R=S;var T=t(4743),E=t(5475),I=t(7309),D=(t(4838),t(6133));const M=()=>(0,m.jsx)("div",{style:{backgroundColor:"#e0e0e0",height:"100%",width:"100%"}}),P=()=>{const{isDarkMode:e}=(0,D.D2)(),{loading:n,error:t,data:s}=(0,r.I)(T.F4);if(t)return(0,m.jsx)(I.A,{message:t.message});let a=[];if(s){a=[...s.getAllStories].sort(((e,n)=>n.id-e.id)).slice(0,9)}return(0,m.jsxs)("div",{className:"home-container",children:[(0,m.jsxs)("section",{className:"carousel-section",children:[(0,m.jsx)("h2",{className:"carousel-heading",children:"Featured Stories"}),(0,m.jsx)(C,{className:"carousel",controls:!0,indicators:!0,keyboard:!0,slide:!1,"data-bs-theme":"dark",children:n?Array(5).fill(null).map(((e,n)=>(0,m.jsx)(C.Item,{children:(0,m.jsx)(M,{})},n))):s.getAllStories.slice(0,5).map(((e,n)=>(0,m.jsx)(C.Item,{children:(0,m.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"400px",width:"100%"},children:(0,m.jsxs)(w.A,{className:"shadow",style:{textAlign:"center",width:"80%",minHeight:"70%"},children:[0===n&&(0,m.jsx)("span",{className:"badge badge-secondary badge-corner",children:"Top Story"}),(0,m.jsxs)(w.A.Body,{children:[(0,m.jsx)(w.A.Title,{children:e.title}),(0,m.jsx)(w.A.Text,{children:e.description}),(0,m.jsxs)(w.A.Text,{children:["Genre: ",e.genre]}),(0,m.jsx)(w.A.Text,{children:(0,m.jsxs)("small",{className:"text-muted",children:["By:",(0,m.jsx)(E.N_,{style:{color:"inherit",textDecoration:"inherit"},to:"/user/".concat(e.author.id),children:e.author.username})," "]})}),(0,m.jsx)(E.N_,{to:"/story/".concat(e.id),children:(0,m.jsx)(k.A,{variant:"secondary",children:"Read Story"})})]})]})})},e.id)))})]}),(0,m.jsxs)("section",{className:"stories-grid",children:[(0,m.jsx)("h2",{className:"carousel-heading",children:"Recent Stories"}),(0,m.jsx)("div",{className:"card-grid-container",children:(0,m.jsx)(R,{children:n?Array(9).fill(null).map(((e,n)=>(0,m.jsx)(w.A,{className:"shadow",style:{margin:"15px"},children:(0,m.jsx)(M,{})},n))):a.map((n=>(0,m.jsx)(w.A,{className:"shadow ".concat(e?"dark-mode":"light-mode"),style:{margin:"15px",maxWidth:"600px"},children:(0,m.jsxs)(w.A.Body,{children:[(0,m.jsx)(w.A.Title,{children:n.title}),(0,m.jsx)(w.A.Text,{children:n.description}),(0,m.jsxs)(w.A.Text,{children:["Genre: ",n.genre]}),(0,m.jsx)(w.A.Text,{children:(0,m.jsxs)("small",{className:"text-muted",children:["By: ",(0,m.jsx)(E.N_,{style:{color:"inherit",textDecoration:"inherit"},to:"/user/".concat(n.author.id),children:n.author.username})]})}),(0,m.jsx)(E.N_,{to:"/story/".concat(n.id),children:(0,m.jsx)(k.A,{variant:"secondary",children:"Read Story"})})]})},n.id)))})})]})]})}},1719:(e,n,t)=>{t.d(n,{A:()=>y});var r=t(8139),s=t.n(r),a=t(5043),l=t(7121),c=t(1456),i=t(7852),o=t(4488),d=t(579);const u=(0,o.A)("h4");u.displayName="DivStyledAsH4";const h=a.forwardRef(((e,n)=>{let{className:t,bsPrefix:r,as:a=u,...l}=e;return r=(0,i.oU)(r,"alert-heading"),(0,d.jsx)(a,{ref:n,className:s()(t,r),...l})}));h.displayName="AlertHeading";const x=h;var m=t(6161);const f=a.forwardRef(((e,n)=>{let{className:t,bsPrefix:r,as:a=m.A,...l}=e;return r=(0,i.oU)(r,"alert-link"),(0,d.jsx)(a,{ref:n,className:s()(t,r),...l})}));f.displayName="AlertLink";const v=f;var j=t(8072),p=t(5632);const N=a.forwardRef(((e,n)=>{const{bsPrefix:t,show:r=!0,closeLabel:a="Close alert",closeVariant:o,className:u,children:h,variant:x="primary",onClose:m,dismissible:f,transition:v=j.A,...N}=(0,l.Zw)(e,{show:"onClose"}),y=(0,i.oU)(t,"alert"),A=(0,c.A)((e=>{m&&m(!1,e)})),g=!0===v?j.A:v,b=(0,d.jsxs)("div",{role:"alert",...g?void 0:N,ref:n,className:s()(u,y,x&&"".concat(y,"-").concat(x),f&&"".concat(y,"-dismissible")),children:[f&&(0,d.jsx)(p.A,{onClick:A,"aria-label":a,variant:o}),h]});return g?(0,d.jsx)(g,{unmountOnExit:!0,...N,ref:void 0,in:r,children:b}):r?b:null}));N.displayName="Alert";const y=Object.assign(N,{Link:v,Heading:x})},2663:(e,n,t)=>{t.d(n,{Tj:()=>s,jJ:()=>a,mf:()=>l});var r=t(5043);function s(e,n){let t=0;return r.Children.map(e,(e=>r.isValidElement(e)?n(e,t++):e))}function a(e,n){let t=0;r.Children.forEach(e,(e=>{r.isValidElement(e)&&n(e,t++)}))}function l(e,n){return r.Children.toArray(e).some((e=>r.isValidElement(e)&&e.type===n))}},4838:()=>{}}]);
//# sourceMappingURL=857.6e6ffda6.chunk.js.map