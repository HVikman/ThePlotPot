{"version":3,"file":"static/js/309.36fa6d08.chunk.js","mappings":"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","sources":["pages/newstory/genres.js","pages/newstory/StoryForm.jsx","hooks/createStory.js","utils/charactercounter.js"],"sourcesContent":["export const genres = [\r\n  'Action and Adventure',\r\n  'Adventure',\r\n  'Alternate History',\r\n  'Anthology',\r\n  'Art',\r\n  'Autobiography',\r\n  'Biography',\r\n  'Childrens',\r\n  'Classic',\r\n  'Comic/Graphic Novel',\r\n  'Contemporary',\r\n  'Crime',\r\n  'Drama',\r\n  'Dystopian',\r\n  'Epic',\r\n  'Erotic Fiction',\r\n  'Fable',\r\n  'Fairy Tale',\r\n  'Fantasy',\r\n  'Gothic Fiction',\r\n  'Historical Fiction',\r\n  'Horror',\r\n  'Humor',\r\n  'Inspirational',\r\n  'Journal',\r\n  'LGBT',\r\n  'Literary Fiction',\r\n  'Military/War Fiction',\r\n  'Mystery',\r\n  'Mythology',\r\n  'Noir',\r\n  'Paranormal Romance',\r\n  'Philosophical',\r\n  'Poetry',\r\n  'Political',\r\n  'Post-Apocalyptic',\r\n  'Psychological Thriller',\r\n  'Religious',\r\n  'Romance',\r\n  'Satire',\r\n  'Science Fiction',\r\n  'Self-help',\r\n  'Short Story',\r\n  'Speculative Fiction',\r\n  'Spiritual',\r\n  'Sports',\r\n  'Suspense/Thriller',\r\n  'Travel',\r\n  'True Crime',\r\n  'Western',\r\n  'Young Adult (YA)'\r\n]\r\nexport default genres\r\n","import React, { useState, useEffect } from 'react'\r\nimport { useFormik } from 'formik'\r\nimport * as Yup from 'yup'\r\nimport { AutoComplete, Collapse, Input, Form } from 'antd'\r\nimport { Button } from 'react-bootstrap'\r\nimport genres from './genres'\r\nimport ReactQuill from 'react-quill'\r\nimport 'quill/dist/quill.snow.css'\r\nimport '../../utils/charactercounter'\r\nimport './quill.css'\r\n\r\nimport { useAuth } from '../auth/AuthContext'\r\nimport { useNotifications } from '../../components/NotificationsContext'\r\nimport { useCreateStory } from '../../hooks/createStory'\r\n\r\n// Form validation schema\r\nconst validationSchema = Yup.object({\r\n  title: Yup.string()\r\n    .required('Required')\r\n    .max(100, 'Must be 100 characters or less'),\r\n  description: Yup.string()\r\n    .required('Required')\r\n    .max(500, 'Must be 450 characters or less'),\r\n  content: Yup.string().required('Required'),\r\n  genre: Yup.string().required('Required')\r\n})\r\n\r\nconst initialValues = {\r\n  title: '',\r\n  description: '',\r\n  content: '',\r\n  genre: '',\r\n  honeypot: '',\r\n}\r\n\r\n// Quill modules\r\nconst quillModules = {\r\n  characterCounter: {\r\n    container: '#character-count',\r\n    maxChars: 12000\r\n  },\r\n  toolbar: [\r\n    [{ 'header': [1, 2, 3, false] }],\r\n    ['bold', 'italic', 'underline', 'blockquote'],\r\n    [{ 'list': 'ordered' }, { 'list': 'bullet' }],\r\n  ]\r\n}\r\n\r\nconst StoryForm = () => {\r\n  const { addNotification } = useNotifications()\r\n  const { user } = useAuth()\r\n  const isAuthenticated = !!user\r\n\r\n  const [disabledPanels, setDisabledPanels] = useState('disabled')\r\n\r\n  const createStory = useCreateStory(addNotification)\r\n\r\n  const formik = useFormik({\r\n    initialValues,\r\n    validationSchema,\r\n    onSubmit: (values) => {\r\n      if (values.honeypot) {\r\n        console.log('Bot detected')\r\n        return\r\n      }\r\n      createStory({\r\n        variables: {\r\n          title: values.title,\r\n          description: values.description,\r\n          genre: values.genre,\r\n          firstChapterContent: values.content\r\n        }\r\n      }).catch(error => {\r\n        console.error('There was an error creating the chapter:', error)\r\n        addNotification(error.message, 3000, 'error')\r\n      })\r\n    },\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (formik.values.title && formik.values.description && formik.values.genre) {\r\n      setDisabledPanels('')\r\n    } else {\r\n      setDisabledPanels('disabled')\r\n    }\r\n  }, [formik.values.title, formik.values.description, formik.values.genre])\r\n\r\n  if (!isAuthenticated) {\r\n    return <p>You are not logged in.</p>\r\n  }\r\n\r\n  const items = [\r\n    {\r\n      key: '1',\r\n      label: 'Step 1: Basic Details',\r\n      children: (\r\n        <Form layout=\"vertical\" onSubmit={formik.handleSubmit} className='mx-2'>\r\n          <Form.Item label=\"Title\" help={formik.touched.title && formik.errors.title}>\r\n            <Input\r\n              type=\"text\"\r\n              name=\"title\"\r\n              placeholder=\"Give your story a cool title\"\r\n              onChange={formik.handleChange}\r\n              onBlur={formik.handleBlur}\r\n              value={formik.values.title}\r\n            />\r\n          </Form.Item>\r\n          <Form.Item label=\"Description\" help={formik.touched.description && formik.errors.description}>\r\n            <Input.TextArea\r\n              name=\"description\"\r\n              placeholder='Captivating description goes here!'\r\n              onChange={formik.handleChange}\r\n              onBlur={formik.handleBlur}\r\n              value={formik.values.description}\r\n              rows={4}\r\n            />\r\n          </Form.Item>\r\n          <Form.Item label=\"Genre\" help={formik.touched.genre && formik.errors.genre}>\r\n            <AutoComplete\r\n              value={formik.values.genre}\r\n              onChange={value => formik.setFieldValue('genre', value)}\r\n              style={{ width: '100%' }}\r\n              options={genres.map(genre => ({ value: genre }))}\r\n              placeholder=\"Select a genre\"\r\n              filterOption={(inputValue, option) =>\r\n                option.value.toUpperCase().includes(inputValue.toUpperCase())\r\n              }\r\n            />\r\n          </Form.Item>\r\n        </Form>\r\n      )\r\n    },\r\n    {\r\n      key: '2',\r\n      collapsible: disabledPanels,\r\n      label: 'Step 2: Story Content',\r\n      children: (\r\n        <div className='mx-2'>\r\n          <ReactQuill\r\n            value={formik.values.content}\r\n            onChange={value => formik.setFieldValue('content', value)}\r\n            theme=\"snow\"\r\n            modules={quillModules}\r\n          />\r\n          <div id=\"character-count\"></div>\r\n          <Button variant='secondary' onClick={() => formik.handleSubmit()}>Submit</Button>\r\n        </div>\r\n      )\r\n    }\r\n  ]\r\n\r\n  return (\r\n    <Collapse items={items} defaultActiveKey={['1']} />\r\n  )\r\n}\r\n\r\nexport default StoryForm\r\n","import { useMutation } from '@apollo/client'\r\nimport { GET_ALL_STORIES, CREATE_STORY } from '../api/queries'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nexport const useCreateStory = (addNotification) => {\r\n  const navigate = useNavigate()\r\n\r\n  const [createStory] = useMutation(CREATE_STORY, {\r\n    update: (cache, { data: { createStory } }) => {\r\n      if (createStory.success) {\r\n        addNotification(`${createStory.story.title} created successfully!`, 2000, 'success')\r\n        console.log('New Story ID:', createStory.story.id)\r\n        navigate(`/story/${createStory.story.id}`)\r\n      } else {\r\n        console.log('Failed to create story:', createStory.message)\r\n        addNotification(`Story creation failed: ${createStory.message}`, 2000, 'error')\r\n      }\r\n      const { getAllStories } = cache.readQuery({ query: GET_ALL_STORIES })\r\n      const updatedStories = [...getAllStories, createStory.story]\r\n      cache.writeQuery({\r\n        query: GET_ALL_STORIES,\r\n        data: { getAllStories: updatedStories }\r\n      })\r\n    }\r\n  })\r\n\r\n  return createStory\r\n}\r\n","import Quill from 'quill'\r\n\r\nclass CharacterCounter {\r\n  constructor(quill, options) {\r\n    this.quill = quill\r\n    this.options = options\r\n    this.container = document.querySelector(options.container)\r\n\r\n    quill.on('text-change', this.update.bind(this))\r\n    this.update()\r\n  }\r\n\r\n  calculate() {\r\n    let text = this.quill.getText()\r\n    return text.length\r\n  }\r\n\r\n  update() {\r\n    let charCount = this.calculate()\r\n    if (charCount > this.options.maxChars) {\r\n      let currentText = this.quill.getText()\r\n      let newText = currentText.substring(0, this.options.maxChars)\r\n      this.quill.setText(newText)\r\n    }\r\n    this.container.innerText = charCount + ' / ' + this.options.maxChars\r\n  }\r\n}\r\n\r\nQuill.register('modules/characterCounter', CharacterCounter)\r\n\r\nexport default CharacterCounter\r\n"],"names":["validationSchema","Yup","title","required","max","description","content","genre","initialValues","honeypot","quillModules","characterCounter","container","maxChars","toolbar","addNotification","useNotifications","isAuthenticated","useAuth","user","_useState","useState","_useState2","_slicedToArray","disabledPanels","setDisabledPanels","createStory","navigate","useNavigate","_useMutation","useMutation","CREATE_STORY","update","cache","_ref","data","success","concat","story","console","log","id","message","getAllStories","readQuery","query","GET_ALL_STORIES","updatedStories","_toConsumableArray","writeQuery","useCreateStory","formik","useFormik","onSubmit","values","variables","firstChapterContent","catch","error","useEffect","_jsx","children","items","key","label","_jsxs","Form","layout","handleSubmit","className","Item","help","touched","errors","Input","type","name","placeholder","onChange","handleChange","onBlur","handleBlur","value","TextArea","rows","AutoComplete","setFieldValue","style","width","options","genres","map","filterOption","inputValue","option","toUpperCase","includes","collapsible","ReactQuill","theme","modules","Button","variant","onClick","Collapse","defaultActiveKey","CharacterCounter","quill","_classCallCheck","this","document","querySelector","on","bind","_createClass","getText","length","charCount","calculate","newText","substring","setText","innerText","Quill"],"sourceRoot":""}